<table class="table table-hover dash-table">
  <thead>
    <tr>
      <th scope="col" class= "tb-left-align account-logo">Bank Logo</th>
      <th scope="col" class= "tb-left-align account-name"><br></br>Account Name</th>
      <th scope="col" class= "tb-left-align account-name hidden-xs"><br></br>Remove Account</th>
    </tr>
  </thead>
  <tbody>
    <% @account_names.each do |account_name|  %>
      <tr>
        <td class="tb-tr-height tb-left-align account-logo"><img src="/logos/american-express.png" alt="img crl " height="70" ></td>
        <td class="tb-tr-height tb-left-align account-name"><h4><strong><%= account_name %></strong></h4></td>
        <td class="hidden-xs"><a href="">Remove Account</a></td>
      </tr>
    <% end %>
      <tr>
        <td class="tb-tr-height tb-left-align account-logo"><i class="far fa-plus-square"></i></i></td>
        <td class="tb-tr-height tb-left-align account-name"><h4><strong>Add a new account</td></strong></h4>
        <td><a href="#" id="add-api-call">Add Account</a></td>
      </tr>
  </tbody>
</table>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
<script src="https://cdn.plaid.com/link/v2/stable/link-initialize.js"></script>
<script>
  (function($) {
    var handler = Plaid.create({
      apiVersion: 'v2',
      clientName: 'Ledja',
      env: 'development',
      product: ['transactions'],
      key: '<%= ENV["PLAID_PUBLIC_KEY"] %>',
      onSuccess: function(public_token) {
        $.post('/callback', { public_token: public_token },
          function() {
            location.reload();
          });
        },
      });
    document.getElementById('add-api-call').addEventListener("click", function(e) {
      handler.open();
    });
  })(jQuery);
</script>
