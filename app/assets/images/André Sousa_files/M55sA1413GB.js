if (self.CavalryLogger) { CavalryLogger.start_js(["NQfWh"]); }

__d("CameraPostDirectMarkSeenMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1644150182303893"};c.getQueryID=function(){"use strict";return"171816796723339"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("CameraPostLoggingEvents",[],(function(a,b,c,d,e,f){"use strict";e.exports={SEND_REPLY_ATTEMPT:"send_direct_reply_attempted",SEND_REPLY_SUCCESS:"send_direct_reply_success",SEND_REPLY_FAILURE:"send_direct_reply_failure",THREAD_VIEWED:"view",THREAD_MARK_SEEN_ATTEMPT:"mark_thread_seen_attempted",THREAD_MARK_SEEN_SUCCESS:"mark_thread_seen_success",THREAD_MARK_SEEN_FAILURE:"mark_thread_seen_failure",DIRECT_VIEWER_CLICKOUT:"clickout"}}),null);
__d("CameraPostQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"2308667722478241"};c.getQueryID=function(){"use strict";return"235640333953758"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("CameraPostRepliesQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1494166853955273"};c.getQueryID=function(){"use strict";return"1468697053209427"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("CameraPostReplyMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1459763854077111"};c.getQueryID=function(){"use strict";return"1849675045338105"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("CameraPostUserQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1652248708148952"};c.getQueryID=function(){"use strict";return"143159039576179"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("DirectMessagingTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:DirectMessagingLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:DirectMessagingLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:DirectMessagingLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAccountstatus=function(a){this.$1.accountstatus=a;return this};a.prototype.setActionSource=function(a){this.$1.action_source=a;return this};a.prototype.setAdID=function(a){this.$1.ad_id=a;return this};a.prototype.setAppID=function(a){this.$1.appid=a;return this};a.prototype.setAppversion=function(a){this.$1.appversion=a;return this};a.prototype.setBackstagePostID=function(a){this.$1.backstage_post_id=a;return this};a.prototype.setBackstageThreadID=function(a){this.$1.backstage_thread_id=a;return this};a.prototype.setBadgingNumber=function(a){this.$1.badging_number=a;return this};a.prototype.setBlacklistedIds=function(a){this.$1.blacklisted_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setBlacklistedStoriesUsersCount=function(a){this.$1.blacklisted_stories_users_count=a;return this};a.prototype.setCameraPostType=function(a){this.$1.camera_post_type=a;return this};a.prototype.setCameraStoryPromotionID=function(a){this.$1.camera_story_promotion_id=a;return this};a.prototype.setCardID=function(a){this.$1.card_id=a;return this};a.prototype.setClientCameraPostTrackingKey=function(a){this.$1.client_camera_post_tracking_key=a;return this};a.prototype.setClientIsReplay=function(a){this.$1.client_is_replay=a;return this};a.prototype.setClientMediaContentID=function(a){this.$1.client_media_content_id=a;return this};a.prototype.setClientMediaID=function(a){this.$1.client_media_id=a;return this};a.prototype.setClientMediaIdsStrings=function(a){this.$1.client_media_ids_strings=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setClientPreviewType=function(a){this.$1.client_preview_type=a;return this};a.prototype.setClientSessionID=function(a){this.$1.client_session_id=a;return this};a.prototype.setClientSessionTime=function(a){this.$1.client_session_time=a;return this};a.prototype.setClientShareSheetID=function(a){this.$1.client_share_sheet_id=a;return this};a.prototype.setClientViewerSessionID=function(a){this.$1.client_viewer_session_id=a;return this};a.prototype.setClienttime=function(a){this.$1.clienttime=a;return this};a.prototype.setContainermodule=function(a){this.$1.containermodule=a;return this};a.prototype.setCount=function(a){this.$1.count=a;return this};a.prototype.setCountry=function(a){this.$1.country=a;return this};a.prototype.setDeviceid=function(a){this.$1.deviceid=a;return this};a.prototype.setDirectDataSessionID=function(a){this.$1.direct_data_session_id=a;return this};a.prototype.setDirectGroup=function(a){this.$1.direct_group=a;return this};a.prototype.setDirectRecipients=function(a){this.$1.direct_recipients=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setDirectRecipientsSize=function(a){this.$1.direct_recipients_size=a;return this};a.prototype.setDirectSessionID=function(a){this.$1.direct_session_id=a;return this};a.prototype.setDirectSpaces=function(a){this.$1.direct_spaces=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setEventStoriesInTray=function(a){this.$1.event_stories_in_tray=a;return this};a.prototype.setEventname=function(a){this.$1.eventname=a;return this};a.prototype.setExtraClientData=function(a){this.$1.extra_client_data=a;return this};a.prototype.setFirstView=function(a){this.$1.first_view=a;return this};a.prototype.setFolloweeStoriesInTray=function(a){this.$1.followee_stories_in_tray=a;return this};a.prototype.setFriendStoriesInTray=function(a){this.$1.friend_stories_in_tray=a;return this};a.prototype.setGesture=function(a){this.$1.gesture=a;return this};a.prototype.setGridLayoutColumnSize=function(a){this.$1.grid_layout_column_size=a;return this};a.prototype.setGridLayoutRowSize=function(a){this.$1.grid_layout_row_size=a;return this};a.prototype.setGridPageIndex=function(a){this.$1.grid_page_index=a;return this};a.prototype.setGridStoryIndexColumn=function(a){this.$1.grid_story_index_column=a;return this};a.prototype.setGridStoryIndexRow=function(a){this.$1.grid_story_index_row=a;return this};a.prototype.setGroupRecipients=function(a){this.$1.group_recipients=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setGroupRecipientsSize=function(a){this.$1.group_recipients_size=a;return this};a.prototype.setGroupStoriesInTray=function(a){this.$1.group_stories_in_tray=a;return this};a.prototype.setHasMyStory=function(a){this.$1.has_my_story=a;return this};a.prototype.setHasNewContent=function(a){this.$1.has_new_content=a;return this};a.prototype.setHasNewReactions=function(a){this.$1.has_new_reactions=a;return this};a.prototype.setHasNewViews=function(a){this.$1.has_new_views=a;return this};a.prototype.setHasNuxStory=function(a){this.$1.has_nux_story=a;return this};a.prototype.setHashid=function(a){this.$1.hashid=a;return this};a.prototype.setInputMessageID=function(a){this.$1.input_message_id=a;return this};a.prototype.setInspirationGroupSession=function(a){this.$1.inspiration_group_session=a;return this};a.prototype.setInstagramMediaID=function(a){this.$1.instagram_media_id=a;return this};a.prototype.setInstagramUserID=function(a){this.$1.instagram_user_id=a;return this};a.prototype.setInterface=function(a){this.$1["interface"]=a;return this};a.prototype.setIsAudioStory=function(a){this.$1.is_audio_story=a;return this};a.prototype.setIsCamera=function(a){this.$1.is_camera=a;return this};a.prototype.setIsFromStory=function(a){this.$1.is_from_story=a;return this};a.prototype.setIsStory=function(a){this.$1.is_story=a;return this};a.prototype.setIsemployee=function(a){this.$1.isemployee=a;return this};a.prototype.setLiveStoriesInTray=function(a){this.$1.live_stories_in_tray=a;return this};a.prototype.setLiveVideoID=function(a){this.$1.live_video_id=a;return this};a.prototype.setMediaIndex=function(a){this.$1.media_index=a;return this};a.prototype.setMediaOwner=function(a){this.$1.media_owner=a;return this};a.prototype.setMediaOwnerTypeString=function(a){this.$1.media_owner_type_string=a;return this};a.prototype.setMediaType=function(a){this.$1.media_type=a;return this};a.prototype.setMessageLength=function(a){this.$1.message_length=a;return this};a.prototype.setMessageType=function(a){this.$1.message_type=a;return this};a.prototype.setMobileNetworkType=function(a){this.$1.mobile_network_type=a;return this};a.prototype.setMontageMessageID=function(a){this.$1.montage_message_id=a;return this};a.prototype.setMutationID=function(a){this.$1.mutation_id=a;return this};a.prototype.setName=function(a){this.$1.name=a;return this};a.prototype.setNewBirthdayStoryPostingMode=function(a){this.$1.new_birthday_story_posting_mode=a;return this};a.prototype.setNumParticipants=function(a){this.$1.num_participants=a;return this};a.prototype.setNumberBadges=function(a){this.$1.number_badges=a;return this};a.prototype.setNumberLiveStories=function(a){this.$1.number_live_stories=a;return this};a.prototype.setNumberMedia=function(a){this.$1.number_media=a;return this};a.prototype.setNumberNewRows=function(a){this.$1.number_new_rows=a;return this};a.prototype.setNumberNewStories=function(a){this.$1.number_new_stories=a;return this};a.prototype.setNumberReactions=function(a){this.$1.number_reactions=a;return this};a.prototype.setNumberRows=function(a){this.$1.number_rows=a;return this};a.prototype.setNumberStories=function(a){this.$1.number_stories=a;return this};a.prototype.setNumberViewers=function(a){this.$1.number_viewers=a;return this};a.prototype.setOldBirthdayStoryPostingMode=function(a){this.$1.old_birthday_story_posting_mode=a;return this};a.prototype.setOriginalVideoFileSize=function(a){this.$1.original_video_file_size=a;return this};a.prototype.setOtherParticipant=function(a){this.$1.other_participant=a;return this};a.prototype.setOverlayTypesUsed=function(a){this.$1.overlay_types_used=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setPageStoriesInTray=function(a){this.$1.page_stories_in_tray=a;return this};a.prototype.setPrivacyMode=function(a){this.$1.privacy_mode=a;return this};a.prototype.setProductMediaType=function(a){this.$1.product_media_type=a;return this};a.prototype.setProductSurface=function(a){this.$1.product_surface=a;return this};a.prototype.setPromotionID=function(a){this.$1.promotion_id=a;return this};a.prototype.setPromotionMediaID=function(a){this.$1.promotion_media_id=a;return this};a.prototype.setPromotionStoriesInTray=function(a){this.$1.promotion_stories_in_tray=a;return this};a.prototype.setRawclienttime=function(a){this.$1.rawclienttime=a;return this};a.prototype.setReactionID=function(a){this.$1.reaction_id=a;return this};a.prototype.setReactionType=function(a){this.$1.reaction_type=a;return this};a.prototype.setReadStories=function(a){this.$1.read_stories=a;return this};a.prototype.setReason=function(a){this.$1.reason=a;return this};a.prototype.setReplaysLeft=function(a){this.$1.replays_left=a;return this};a.prototype.setReplyCount=function(a){this.$1.reply_count=a;return this};a.prototype.setReplyType=function(a){this.$1.reply_type=a;return this};a.prototype.setRowIndex=function(a){this.$1.row_index=a;return this};a.prototype.setRowStatus=function(a){this.$1.row_status=a;return this};a.prototype.setSendKey=function(a){this.$1.send_key=a;return this};a.prototype.setServerPostSource=function(a){this.$1.server_post_source=a;return this};a.prototype.setServertime=function(a){this.$1.servertime=a;return this};a.prototype.setSoftDeletedStoryThreadIds=function(a){this.$1.soft_deleted_story_thread_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setSource=function(a){this.$1.source=a;return this};a.prototype.setSourceThreadID=function(a){this.$1.source_thread_id=a;return this};a.prototype.setSrgSrtJobID=function(a){this.$1.srg_srt_job_id=a;return this};a.prototype.setStoriesTrayFeedUnitTrackingString=function(a){this.$1.stories_tray_feed_unit_tracking_string=a;return this};a.prototype.setStoryCardShareeID=function(a){this.$1.story_card_sharee_id=a;return this};a.prototype.setStoryCardSharerID=function(a){this.$1.story_card_sharer_id=a;return this};a.prototype.setStoryIndex=function(a){this.$1.story_index=a;return this};a.prototype.setStoryMediaIds=function(a){this.$1.story_media_ids=b("GeneratedLoggerUtils").serializeMap(a);return this};a.prototype.setStoryOwner=function(a){this.$1.story_owner=a;return this};a.prototype.setStoryOwnerFbids=function(a){this.$1.story_owner_fbids=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setStoryOwnerType=function(a){this.$1.story_owner_type=a;return this};a.prototype.setStoryRankingScores=function(a){this.$1.story_ranking_scores=b("GeneratedLoggerUtils").serializeMap(a);return this};a.prototype.setStoryTargetCount=function(a){this.$1.story_target_count=a;return this};a.prototype.setStoryThreadIds=function(a){this.$1.story_thread_ids=b("GeneratedLoggerUtils").serializeMap(a);return this};a.prototype.setTargetID=function(a){this.$1.target_id=a;return this};a.prototype.setThreadCount=function(a){this.$1.thread_count=a;return this};a.prototype.setThreadViewIdentifier=function(a){this.$1.thread_view_identifier=a;return this};a.prototype.setTracking=function(a){this.$1.tracking=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setTrackingString=function(a){this.$1.tracking_string=a;return this};a.prototype.setTraySessionID=function(a){this.$1.tray_session_id=a;return this};a.prototype.setTriggerSource=function(a){this.$1.trigger_source=a;return this};a.prototype.setTruePromptID=function(a){this.$1.true_prompt_id=a;return this};a.prototype.setUnifiedPrivacyMode=function(a){this.$1.unified_privacy_mode=a;return this};a.prototype.setUnifiedStoriesMediaSource=function(a){this.$1.unified_stories_media_source=a;return this};a.prototype.setUnreadStories=function(a){this.$1.unread_stories=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setVideoLength=function(a){this.$1.video_length=a;return this};a.prototype.setViewerSessionStoryPogConsumptionIndex=function(a){this.$1.viewer_session_story_pog_consumption_index=a;return this};a.prototype.setWhitelistedIds=function(a){this.$1.whitelisted_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setWhitelistedStoriesUsersCount=function(a){this.$1.whitelisted_stories_users_count=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={accountstatus:!0,action_source:!0,ad_id:!0,appid:!0,appversion:!0,backstage_post_id:!0,backstage_thread_id:!0,badging_number:!0,blacklisted_ids:!0,blacklisted_stories_users_count:!0,camera_post_type:!0,camera_story_promotion_id:!0,card_id:!0,client_camera_post_tracking_key:!0,client_is_replay:!0,client_media_content_id:!0,client_media_id:!0,client_media_ids_strings:!0,client_preview_type:!0,client_session_id:!0,client_session_time:!0,client_share_sheet_id:!0,client_viewer_session_id:!0,clienttime:!0,containermodule:!0,count:!0,country:!0,deviceid:!0,direct_data_session_id:!0,direct_group:!0,direct_recipients:!0,direct_recipients_size:!0,direct_session_id:!0,direct_spaces:!0,event_stories_in_tray:!0,eventname:!0,extra_client_data:!0,first_view:!0,followee_stories_in_tray:!0,friend_stories_in_tray:!0,gesture:!0,grid_layout_column_size:!0,grid_layout_row_size:!0,grid_page_index:!0,grid_story_index_column:!0,grid_story_index_row:!0,group_recipients:!0,group_recipients_size:!0,group_stories_in_tray:!0,has_my_story:!0,has_new_content:!0,has_new_reactions:!0,has_new_views:!0,has_nux_story:!0,hashid:!0,input_message_id:!0,inspiration_group_session:!0,instagram_media_id:!0,instagram_user_id:!0,"interface":!0,is_audio_story:!0,is_camera:!0,is_from_story:!0,is_story:!0,isemployee:!0,live_stories_in_tray:!0,live_video_id:!0,media_index:!0,media_owner:!0,media_owner_type_string:!0,media_type:!0,message_length:!0,message_type:!0,mobile_network_type:!0,montage_message_id:!0,mutation_id:!0,name:!0,new_birthday_story_posting_mode:!0,num_participants:!0,number_badges:!0,number_live_stories:!0,number_media:!0,number_new_rows:!0,number_new_stories:!0,number_reactions:!0,number_rows:!0,number_stories:!0,number_viewers:!0,old_birthday_story_posting_mode:!0,original_video_file_size:!0,other_participant:!0,overlay_types_used:!0,page_stories_in_tray:!0,privacy_mode:!0,product_media_type:!0,product_surface:!0,promotion_id:!0,promotion_media_id:!0,promotion_stories_in_tray:!0,rawclienttime:!0,reaction_id:!0,reaction_type:!0,read_stories:!0,reason:!0,replays_left:!0,reply_count:!0,reply_type:!0,row_index:!0,row_status:!0,send_key:!0,server_post_source:!0,servertime:!0,soft_deleted_story_thread_ids:!0,source:!0,source_thread_id:!0,srg_srt_job_id:!0,stories_tray_feed_unit_tracking_string:!0,story_card_sharee_id:!0,story_card_sharer_id:!0,story_index:!0,story_media_ids:!0,story_owner:!0,story_owner_fbids:!0,story_owner_type:!0,story_ranking_scores:!0,story_target_count:!0,story_thread_ids:!0,target_id:!0,thread_count:!0,thread_view_identifier:!0,tracking:!0,tracking_string:!0,tray_session_id:!0,trigger_source:!0,true_prompt_id:!0,unified_privacy_mode:!0,unified_stories_media_source:!0,unread_stories:!0,vc:!0,video_length:!0,viewer_session_story_pog_consumption_index:!0,whitelisted_ids:!0,whitelisted_stories_users_count:!0};e.exports=a}),null);
__d("FBStoriesLoggingConstants",[],(function(a,b,c,d,e,f){"use strict";a={EVENT_STORY:"event",FOLLOWEE_STORY:"followee",FRIEND_STORY:"friend",GROUP_STORY:"group",MISSING_STORY_DATA:"missingStoryData",PAGE_STORY:"page",SELF_STORY:"self",STORY_PROMOTION:"promotion",ACTION_OPEN_MEDIA:"open_media",ACTION_DELETE_MEDIA:"delete_media_attempted",ACTION_SEND_REPLY_ATTEMPT:"attempt_to_send_reply",ACTION_SEND_REPLY_SUCCESS:"mark_reply_sent",ACTION_SEND_REPLY_FAILURE:"reply_sent_failure",ACTION_SEND_STICKER_ATTEMPT:"attempt_to_send_sticker",ACTION_SEND_STICKER_SUCCESS:"mark_sticker_sent",ACTION_SEND_STICKER_FAILURE:"sticker_sent_failure",ACTION_SEND_GIF_ATTEMPT:"attempt_to_send_gif",ACTION_SEND_GIF_SUCCESS:"mark_gif_sent",ACTION_SEND_GIF_FAILURE:"gif_sent_failure",ACTION_SEND_REACTION_ATTEMPT:"attempt_to_send_reaction",ACTION_SEND_REACTION_SUCCESS:"mark_reaction_sent",ACTION_SEND_REACTION_FAILURE:"reaction_sent_failure",ACTION_OPEN_SEEN_SUMMARY:"open_seen_summary",ACTION_OPEN_STORY:"open_story",ACTION_CLOSE_STORY:"close_story",ACTION_TRAY_LOAD:"story_tray_load",ACTION_SEND_STORY_FAILED:"send_story_failed",ACTION_SEND_STORY_SUCCEEDED:"send_story_succeed",ACTION_STORY_NAVIGATION:"story_navigation",GESTURES:{CLOSE_STORY:{CLICK_RIGHT:"click_right",CLICK_LEFT:"click_left",AUTO_JUMP:"auto_jump",AUTO_EXIT:"auto_exit",CLICK_EXIT:"click_exit",SWIPE_RIGHT:"swipe_right",SWIPE_LEFT:"swipe_left",SWIPE_EXIT:"swipe_exit",SWIPE_DOWN_EXIT:"swipe_down_exit",CLOSE_BUTTON_EXIT:"close_button_exit",BACK_BUTTON_EXIT:"back_button_exit"}},SOURCE_OPEN_FROM_STORY_HEAD:"openFromStoryHead",SOURCE_OPEN_FROM_PRIOR_STORY:"openFromPriorStory",SOURCE_CLOSE_FROM_MODAL:"closeFromClickingOnModal",SOURCE_CLOSE_FROM_MODAL_CLOSE_BUTTON:"closeFromClickingOnModalCloseButton",SOURCE_CLOSE_FROM_LAST_STORY_FINISHING:"closeFromLastStoryFinishing",INTERACTIONS:{CATEGORY_KEY:"fb_stories_tray",TOTAL_INIT:"init_agg",DATA_LOADING:"graphql_data_loading",TRAY_RENDER:"react_story_tray_render",VIEWER_OPEN:"viewer_open"},SOURCES:{ARCHIVE:"archive"}};e.exports=a}),null);
__d("CameraPostGraphQLAPI",["Banzai","CameraPostDirectMarkSeenMutationWebGraphQLMutation","CameraPostLoggingEvents","CameraPostQueryWebGraphQLQuery","CameraPostRepliesQueryWebGraphQLQuery","CameraPostReplyMutationWebGraphQLMutation","CameraPostUserQueryWebGraphQLQuery","DirectMessagingTypedLogger","FBStoriesLoggingConstants","WebGraphQL","uniqueID"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a,c,d,e,f,g,h){__p&&__p();var i=new(b("DirectMessagingTypedLogger"))().setCameraPostType(c).setProductSurface("www").setName(e).setCardID(a.toString());if(d.message){var j=d.message.length;i.setMessageLength(j)}h&&i.setReplyType(h);d.sticker_id&&i.addToExtraData("sticker_id",d.sticker_id);d.gif_url&&i.addToExtraData("gif_url",d.gif_url);i.log();b("Banzai").post("stories_interaction_poseidon_logging_banzai",{name:e,thread_id:String(a)});var k={};k.is_fb_story=!0;k.thread_id=a;k.camera_post_type=c;k.attempt_name=e;k.event=b("FBStoriesLoggingConstants").ACTION_SEND_REPLY_ATTEMPT;return b("WebGraphQL").exec(new(b("CameraPostReplyMutationWebGraphQLMutation"))({input:d})).then(function(e){var d=new(b("DirectMessagingTypedLogger"))().setCameraPostType(c).setProductSurface("www").setName(f).setCardID(a.toString());h&&d.setReplyType(h);d.log();k.success_name=f;b("Banzai").post("fb_stories_banzai_generic",{ft:k});return e},function(e){var d=new(b("DirectMessagingTypedLogger"))().setCameraPostType(c).setProductSurface("www").setName(g).setCardID(a.toString());h&&d.setReplyType(h);d.log();k.failure_name=g;b("Banzai").post("fb_stories_banzai_generic",{ft:k});return e})};e.exports={sendDirectMessageReply:function(a,c,d,e,f){var h=b("uniqueID")();h={client_mutation_id:h,actor_id:a,thread_id:c,message:d};f?(a=b("FBStoriesLoggingConstants").ACTION_SEND_REPLY_ATTEMPT,d=b("FBStoriesLoggingConstants").ACTION_SEND_REPLY_SUCCESS,f=b("FBStoriesLoggingConstants").ACTION_SEND_REPLY_FAILURE):(a=b("CameraPostLoggingEvents").SEND_REPLY_ATTEMPT,d=b("CameraPostLoggingEvents").SEND_REPLY_SUCCESS,f=b("CameraPostLoggingEvents").SEND_REPLY_FAILURE);return g(c,e,h,a,d,f)},sendDirectStickerReply:function(a,c,d,e){var f=b("uniqueID")();f={client_mutation_id:f,actor_id:a,thread_id:c,sticker_id:e};return g(c,d,f,b("FBStoriesLoggingConstants").ACTION_SEND_STICKER_ATTEMPT,b("FBStoriesLoggingConstants").ACTION_SEND_STICKER_SUCCESS,b("FBStoriesLoggingConstants").ACTION_SEND_STICKER_FAILURE)},sendDirectGifReply:function(a,c,d,e){var f=b("uniqueID")();f={client_mutation_id:f,actor_id:a,thread_id:c,gif_url:e};return g(c,d,f,b("FBStoriesLoggingConstants").ACTION_SEND_GIF_ATTEMPT,b("FBStoriesLoggingConstants").ACTION_SEND_GIF_SUCCESS,b("FBStoriesLoggingConstants").ACTION_SEND_GIF_FAILURE)},sendLightweightReactionReply:function(a,c,d,e,f){var h="LIGHT_WEIGHT";a={client_mutation_id:b("uniqueID")(),actor_id:a,thread_id:c,message:e,story_reply_type:h,is_lightweight_reaction:!0,lightweight_reaction_actions:{reaction:e,offsets:[f||0]}};return g(c,d,a,b("FBStoriesLoggingConstants").ACTION_SEND_REACTION_ATTEMPT,b("FBStoriesLoggingConstants").ACTION_SEND_REACTION_SUCCESS,b("FBStoriesLoggingConstants").ACTION_SEND_REACTION_FAILURE,"light_weight")},loadThreadFullInformation:function(a,c){return b("WebGraphQL").exec(new(b("CameraPostQueryWebGraphQLQuery"))({thread_id:c})).then(function(a){var d,e;e=(e=a)!=null?(e=e.node)!=null?e.camera_post_type:e:e;d=(d=a)!=null?(d=d.node)!=null?d.viewer_replays_left:d:d;new(b("DirectMessagingTypedLogger"))().setCameraPostType(e).setName(b("CameraPostLoggingEvents").THREAD_VIEWED).setProductSurface("www").setReplaysLeft(d).setCardID(c.toString()).log();return a},function(a){!1;return a})},loadUserInfo:function(){return b("WebGraphQL").exec(new(b("CameraPostUserQueryWebGraphQLQuery"))())},loadRepliesForThread:function(a){return b("WebGraphQL").exec(new(b("CameraPostRepliesQueryWebGraphQLQuery"))({thread_id:a}))},markThreadSeen:function(a,c,d,e,f,g){__p&&__p();var h={};g?h={client_mutation_id:b("uniqueID")(),actor_id:a,story_id:g,last_message_seen_id:d}:h={client_mutation_id:b("uniqueID")(),actor_id:a,thread_id:c,last_message_seen_id:d};g=new(b("DirectMessagingTypedLogger"))().setCameraPostType(e).setName(b("CameraPostLoggingEvents").THREAD_MARK_SEEN_ATTEMPT).setProductSurface("www").setCardID(c.toString());f&&(g=g.setReplaysLeft(f));g.log();var i={};i.is_fb_story=!0;i.camera_post_type=e;i.event=b("CameraPostLoggingEvents").THREAD_MARK_SEEN_ATTEMPT;i.thread_id=c;i.latest_message_id=d;i.replays_left=f?f:-1;return b("WebGraphQL").exec(new(b("CameraPostDirectMarkSeenMutationWebGraphQLMutation"))({input:h})).then(function(a){new(b("DirectMessagingTypedLogger"))().setCameraPostType(e).setProductSurface("www").setName(b("CameraPostLoggingEvents").THREAD_MARK_SEEN_SUCCESS).setReplaysLeft(f).setCardID(c.toString()).log();i.sucess_name=b("CameraPostLoggingEvents").THREAD_MARK_SEEN_SUCCESS;b("Banzai").post("fb_stories_banzai_generic",{ft:i});return a},function(a){new(b("DirectMessagingTypedLogger"))().setCameraPostType(e).setProductSurface("www").setName(b("CameraPostLoggingEvents").THREAD_MARK_SEEN_FAILURE).setReplaysLeft(f).setCardID(c.toString()).log();i.failur_name=b("CameraPostLoggingEvents").THREAD_MARK_SEEN_FAILURE;b("Banzai").post("fb_stories_banzai_generic",{ft:i});return a})},_getLogger:function(){return new(b("DirectMessagingTypedLogger"))()}}}),null);
__d("CameraPostBucketOwnerHelper",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getId:function(a){return((a=a)!=null?a.id:a)||""},getName:function(a){return((a=a)!=null?a.name:a)||""},getGender:function(a){return!a?"":a.gender?a.gender:""},isEventHost:function(a){return!a?!1:a.is_viewer_host?!!a.is_viewer_host:!1},isViewerFriend:function(a){return!a?!1:a.is_viewer_friend?!!a.is_viewer_friend:!1},isEmployee:function(a){return!a?!1:a.is_employee?!!a.is_employee:!1},getProfilePictureUri:function(a){return!a||!a.profile_picture?"":a.profile_picture.uri||""},getCoverPhotoUri:function(a){return!a||!a.cover_photo?"":((a=a)!=null?(a=a.cover_photo)!=null?(a=a.photo)!=null?(a=a.image)!=null?a.uri:a:a:a:a)||""},isViewerPageContentAdmin:function(a){a=g._getViewerProfilePermissions(a);return a&&a.includes("EDIT_PROFILE")||!1},isViewerGroupModerator:function(a){a=g._getViewerAdminType(a);return a==="MODERATOR"},isViewerGroupAdmin:function(a){a=g._getViewerAdminType(a);return a==="ADMIN"},_getViewerProfilePermissions:function(a){return!a||!a.viewer_profile_permissions?null:((a=a)!=null?a.viewer_profile_permissions:a)||null},_getViewerAdminType:function(a){return!a||!a.viewer_admin_type?null:((a=a)!=null?a.viewer_admin_type:a)||null},requiresAdminApproval:function(a){return!a?!1:a.story_approval_required&&!!a.story_approval_required||(a.stories_admin_approval_required_setting?a.stories_admin_approval_required_setting==="ON":!1)},isGroupAdmin:function(a,b){if(!a||!a.group_admin_profiles)return!1;a=((a=a)!=null?(a=a.group_admin_profiles)!=null?a.edges:a:a)||[];a=g._getIdsFromEdges(a);return a.includes(b)},isMutedFromGroup:function(a,b){if(!a||!a.group_muted_members)return!1;a=a.group_muted_members.edges;return g._getIdsFromEdges(a).includes(b)},setIsMutedFromGroup:function(a,b,c){if(!a||!a.group_muted_members)return;var d=a.group_muted_members.edges,e=g.isMutedFromGroup(a,b);c!==e&&(c?d.push({node:{id:b}}):a.group_muted_members={edges:d.filter(function(a){a.node.id!==b})})},_getIdsFromEdges:function(a){return a.map(function(a){return a.node.id})}};e.exports=g}),null);
__d("CameraPostMediaHelper",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getId:function(a){return((a=a)!=null?a.id:a)||""},getWidth:function(a){if(!a)return 0;if(a.width)return a.width;return a.image?a.image.width||0:0},getHeight:function(a){if(!a)return 0;if(a.height)return a.height;return a.image?a.image.height||0:0},getType:function(a){return((a=a)!=null?a.__typename:a)||""},getImageUri:function(a){return!a?null:a.image?a.image.uri:null},getBlurImageUri:function(a){return!a?null:a.image_blurred?a.image_blurred.uri:null},isSphericalPhoto:function(a){return!a?!1:a.photo_encodings?a.photo_encodings.length>0:!1},isImage:function(a){return g.getType(a)==="Photo"},isVideo:function(a){return g.getType(a)==="Video"},getPreviewImage:function(a){return!a?null:a.preview_image?a.preview_image.uri:null},makeOptimisticPhotoMedia:function(a){return{id:null,message:{text:null},__typename:"Photo",preview_image:{uri:a,width:null,height:null},image:{uri:a,width:null,height:null},image_blurred:{uri:a,width:null,height:null}}}};e.exports=g}),null);
__d("CameraPostThreadOwnerHelper",[],(function(a,b,c,d,e,f){"use strict";a={getId:function(a){return(a=a)!=null?a.id:a},getName:function(a){return((a=a)!=null?a.name:a)||""},getIsViewerFriend:function(a){return!!((a=a)!=null?a.is_viewer_friend:a)},getProfilePictureUri:function(a){return((a=a)!=null?(a=a.profile_picture)!=null?a.uri:a:a)||""}};e.exports=a}),null);
__d("CameraPostTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({STORY:"STORY",PAGE_STORY:"PAGE_STORY",EVENT_STORY:"EVENT_STORY",BIRTHDAY_STORY:"BIRTHDAY_STORY",GROUP_STORY:"GROUP_STORY",CREW_STORY:"CREW_STORY",GOODWILL_STORY:"GOODWILL_STORY",GOODWILL_GENERATED_STORY:"GOODWILL_GENERATED_STORY",SELF_BIRTHDAY_STORY:"SELF_BIRTHDAY_STORY",DIRECT:"DIRECT",GROUP_DIRECT:"GROUP_DIRECT",DIRECT_NUX:"DIRECT_NUX",STORY_NUX:"STORY_NUX",TOPIC_STORY:"TOPIC_STORY",LIVE_STORY:"LIVE_STORY",PROMOTION_STORY:"PROMOTION_STORY",NULL_HEADS:"NULL_HEADS",DUMMY_SELF_BUCKET:"DUMMY_SELF_BUCKET"})}),null);
__d("CameraPostTypesHelper",["CameraPostTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={isEventStory:function(a){return a===b("CameraPostTypes").EVENT_STORY},isGroupStory:function(a){return a===b("CameraPostTypes").GROUP_STORY},isMultiAuthor:function(a){return g.isEventStory(a)||g.isGroupStory(a)},isPageStory:function(a){return a===b("CameraPostTypes").PAGE_STORY},isPromotionStory:function(a){return a===b("CameraPostTypes").PROMOTION_STORY},isStory:function(a){return a===b("CameraPostTypes").STORY},isStoryNux:function(a){return a===b("CameraPostTypes").STORY_NUX}};e.exports=g}),null);
__d("FBStoriesActionTypes",[],(function(a,b,c,d,e,f){a=Object.freeze({LOAD:"FB_STORIES.LOAD",LOADING:"FB_STORIES.LOADING",LOADED:"FB_STORIES.LOADED",LOADED_ERROR:"FB_STORIES.LOADED_ERROR",VIEWER_LIST_LOADED_FOR_THREAD:"FB_STORIES.VIEWER_LIST_LOADED_FOR_THREAD",RESET_LOCAL_SEEN_HISTORY:"FB_STORIES.RESET_LOCAL_SEEN_HISTORY",SELECTED_BUCKET_IDX_CHANGED:"FB_STORIES.SELECTED_BUCKET_IDX_CHANGED",SET_ALL_BUCKETS_VIEWED:"FB_STORIES.SET_ALL_BUCKETS_VIEWED",SET_UNSEEN_MODE:"FB_STORIES.SET_UNSEEN_MODE",SELECTED_THREAD_IDX_CHANGED:"FB_STORIES.SELECTED_THREAD_IDX_CHANGED",SELECTED_THREAD_PERCENT_DONE:"FB_STORIES.SELECTED_THREAD_PERCENT_DONE",SUBSCRIPTION_BUCKET_UPDATE:"FB_STORIES.SUBSCRIPTION_BUCKET_UPDATE",UPDATE_THREAD_SEEN_OPTIMISTIC:"FB_STORIES.UPDATE_THREAD_SEEN_OPTIMISTIC",UPDATE_THREAD_VIEWERS_SEEN_OPTIMISTIC:"FB_STORIES.UPDATE_THREAD_VIEWERS_SEEN_OPTIMISTIC",DELETE_THREAD_FROM_BUCKET:"FB_STORIES.DELETE_THREAD_FROM_BUCKET",REMOVE_BUCKET:"FB_STORIES.REMOVE_BUCKET",REMOVE_ENDED_LIVE_VIDEO_FROM_BUCKET:"FB_STORIES.REMOVE_ENDED_LIVE_VIDEO_FROM_BUCKET",SET_IS_COMMERCIAL_BREAK_RUNNING:"FB_STORIES.SET_IS_COMMERCIAL_BREAK_RUNNING",UNSELECT_BUCKET:"FBSTORIES.UNSELECT_BUCKET",SET_VIEWER_OPEN:"FB_STORIES.SET_VIEWER_OPEN",OPTIMISTIC_CREATE_PHOTO_STORY:"FB_STORIES.OPTIMISTIC_CREATE_PHOTO_STORY",SET_USER_BUCKET_UPLOAD_STATUS:"FB_STORIES.SET_USER_BUCKET_UPLOAD_STATUS",RESET_STATE:"FB_STORIES.RESET_STATE",SET_SUBSCRIPTION_TOKEN:"FB_STORIES.SET_SUBSCRIPTION_TOKEN",OPTIMISTIC_POLL_VOTE:"FB_STORIES.OPTIMISTIC_POLL_VOTE",SET_IS_PRODUCTION_DIALOG_LOADING:"FB_STORIES.SET_IS_PRODUCTION_DIALOG_LOADING",APPROVE_PENDING_THREAD:"FB_STORIES.APPROVE_PENDING_THREAD"});e.exports=a}),null);
__d("FBStoriesDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;c=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g=c&&c.prototype;function a(a){g.constructor.call(this,a),this.dispatch=this.dispatch.bind(this)}e.exports=new a({strict:!0})}),null);
__d("FBStoriesActions",["CameraPostBucketOwnerHelper","CameraPostGraphQLAPI","FBLogger","FBStoriesActionsHelper","FBStoriesActionTypes","FBStoriesDispatcher","FBStoriesGraphQLAPI","FBStoriesLoggingConstants","FBStoriesLoggingHelper","FBStoriesMutedBucketOwnersActions","FBStoriesPrefetcher","FBStoriesStore","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBStoriesDispatcher").dispatch,h={resetStore:function(){g({type:b("FBStoriesActionTypes").RESET_STATE})},loadData:function(a,c,d,e,f){g({type:b("FBStoriesActionTypes").LOADED,data:{userInfo:{userName:a,userID:c,userGender:null,userProfilePic:{uri:d}},userBucketData:null,friendsBucketData:f}})},nextThread:function(a){var c=b("FBStoriesStore").isSelectedBucketLive();if(c){h.nextBucket();return}c=b("FBStoriesStore").getThreadsForSelectedBucket();var d=b("FBStoriesStore").getCurrentThreadIndexForSelectedBucket();a=a!==undefined?a:d+1;c.length===0?h.nextBucket():a<=c.length-1?h.currentThreadIndexChanged(a):h.nextBucket()},prevThread:function(a){var c=b("FBStoriesStore").isSelectedBucketLive();if(c){h.prevBucket();return}c=b("FBStoriesStore").getThreadsForSelectedBucket();var d=b("FBStoriesStore").getCurrentThreadIndexForSelectedBucket();a=a!==undefined?a:d-1;c.length===0?h.prevBucket():a>=0?h.currentThreadIndexChanged(a,!0):h.prevBucket()},nextBucket:function(){return h._transitionBucket(!0)},prevBucket:function(){return h._transitionBucket(!1)},userSelectedBucket:function(a){__p&&__p();var c=b("FBStoriesStore").getBucketIndexByBucketId(a);if(c===-1)return!1;var d=b("FBStoriesStore").getUnseenThreadIndex(c),e=Math.max(0,d);a=b("FBStoriesStore").isOwnBucket(a);g({type:b("FBStoriesActionTypes").RESET_LOCAL_SEEN_HISTORY});g({type:b("FBStoriesActionTypes").SET_UNSEEN_MODE,value:!a&&d>=0});g({type:b("FBStoriesActionTypes").SET_ALL_BUCKETS_VIEWED,value:!1});g({type:b("FBStoriesActionTypes").SELECTED_BUCKET_IDX_CHANGED,bucketIndex:c});h.currentThreadIndexChanged(e);return!0},updateCurrentThreadPercentDone:function(a){g({type:b("FBStoriesActionTypes").SELECTED_THREAD_PERCENT_DONE,percentDone:a})},currentThreadIndexChanged:function(a,c){__p&&__p();c===void 0&&(c=!1);var d=b("FBStoriesStore").getCurrentThreadData(),e=b("FBStoriesStore").isOwnBucket();e&&d&&!d.isLive&&h.markThreadViewersSeen(d.threadID);g({type:b("FBStoriesActionTypes").SELECTED_THREAD_IDX_CHANGED,index:a});h.updateCurrentThreadPercentDone(0);d=b("FBStoriesStore").getCurrentThreadData();if(d){if(e&&!d.isLive){var f=d.threadID;b("promiseDone")(b("FBStoriesGraphQLAPI").loadViewerListForThread(f),function(a){return g({type:b("FBStoriesActionTypes").VIEWER_LIST_LOADED_FOR_THREAD,threadID:f,data:a})},function(a){return b("FBLogger")("fbstories").catching(a).mustfix("Cannot load viewer list for thread: %s",f)})}h.markCurrentThreadAsSeen();b("FBStoriesPrefetcher").prefetchForCurrentThreadAndBucket()}else c?h.prevThread():h.nextThread()},markCurrentThreadAsSeen:function(){var a=b("FBStoriesStore").getUserInfo().userID,c=b("FBStoriesStore").getCurrentThreadData();if(!c||c.isLive)return;var d=c.latestMessageID,e=c.cameraPostType;c=c.threadID;g({type:b("FBStoriesActionTypes").UPDATE_THREAD_SEEN_OPTIMISTIC,threadID:c});b("CameraPostGraphQLAPI").markThreadSeen(a,c,d,e)},markThreadViewersSeen:function(a){g({type:b("FBStoriesActionTypes").UPDATE_THREAD_VIEWERS_SEEN_OPTIMISTIC,threadID:a}),b("FBStoriesGraphQLAPI").updateThreadSeenReciept(a)},_transitionBucket:function(a,c){__p&&__p();var d=b("FBStoriesStore").getCurrentThreadData(),e=b("FBStoriesStore").isOwnBucket();e&&d&&!d.isLive&&h.markThreadViewersSeen(d.threadID);c=c!==undefined?c:b("FBStoriesStore").getSelectedBucketIndex();c=b("FBStoriesActionsHelper").getNextBucketAndThreadIndex(c,a);var f=c.nextBucketIndex;c=c.nextThreadIndex;var i=b("FBStoriesActionsHelper").checkAllBucketsViewed(f);g({type:b("FBStoriesActionTypes").SET_ALL_BUCKETS_VIEWED,value:i});if(i)return e&&d&&!d.isLive?h.markThreadViewersSeen(d.threadID):undefined;h.removeEndedLiveVideo();g({type:b("FBStoriesActionTypes").SELECTED_BUCKET_IDX_CHANGED,bucketIndex:f});if(!b("FBStoriesStore").hasDataInSelectedBucket()&&!b("FBStoriesStore").isSelectedBucketLive())return a?h.nextBucket():h.prevBucket();h.currentThreadIndexChanged(c);b("FBStoriesLoggingHelper").storyLog(b("FBStoriesLoggingConstants").ACTION_OPEN_STORY,b("FBStoriesLoggingConstants").SOURCE_OPEN_FROM_PRIOR_STORY);return undefined},deleteThreadFromBucket:function(a,c){if(!b("FBStoriesStore").isUserManagedThread(a,c))return;b("FBStoriesGraphQLAPI").deleteStory(b("FBStoriesStore").getUserInfo().userID,a);g({type:b("FBStoriesActionTypes").DELETE_THREAD_FROM_BUCKET,threadID:a,bucketID:c});h.nextThread(b("FBStoriesStore").getCurrentThreadIndexForSelectedBucket())},muteBucketOwner:function(a,c){b("FBStoriesMutedBucketOwnersActions").setBucketOwnerMuted(b("CameraPostBucketOwnerHelper").getId(a),b("CameraPostBucketOwnerHelper").getName(a),b("CameraPostBucketOwnerHelper").getProfilePictureUri(a),!0);if(!c)return;g({type:b("FBStoriesActionTypes").REMOVE_BUCKET,bucketID:c});h._transitionBucket(!0,b("FBStoriesStore").getSelectedBucketIndex()-1)},reportThreadToAdmin:function(a){b("FBStoriesGraphQLAPI").reportThreadToAdmin(b("FBStoriesStore").getUserInfo().userID,a)},takeNegativeFeedbackAction:function(a,c){b("FBStoriesGraphQLAPI").takeNegativeFeedbackAction(b("FBStoriesStore").getUserInfo().userID,a,c)},removeEndedLiveVideo:function(){if(!b("FBStoriesStore").isSelectedBucketLiveAndEnded())return;var a=b("FBStoriesStore").getSelectedBucketId();b("FBStoriesStore").getThreadsForSelectedBucket().length>0?g({type:b("FBStoriesActionTypes").REMOVE_ENDED_LIVE_VIDEO_FROM_BUCKET,bucketID:a}):g({type:b("FBStoriesActionTypes").REMOVE_BUCKET,bucketID:a})},setIsCommercialBreakRunning:function(a,c){g({type:b("FBStoriesActionTypes").SET_IS_COMMERCIAL_BREAK_RUNNING,isCommercialBreakRunning:c,videoID:a})},unselectBucket:function(){g({type:b("FBStoriesActionTypes").UNSELECT_BUCKET})},optimisticCreateStoryPhoto:function(a){if(!a)return;g({type:b("FBStoriesActionTypes").OPTIMISTIC_CREATE_PHOTO_STORY,imageURL:a})},setUserBucketUploadStatus:function(a){g({type:b("FBStoriesActionTypes").SET_USER_BUCKET_UPLOAD_STATUS,isUploading:a})},onPollOptionVoted:function(a,c){g({type:b("FBStoriesActionTypes").OPTIMISTIC_POLL_VOTE,index:c}),b("FBStoriesGraphQLAPI").pollVote(a,c)},setIsProductionDialogLoading:function(a){g({type:b("FBStoriesActionTypes").SET_IS_PRODUCTION_DIALOG_LOADING,value:a})},approvePendingThread:function(a,c){g({type:b("FBStoriesActionTypes").APPROVE_PENDING_THREAD,bucketID:a,threadID:c})}};e.exports=h}),null);
__d("BackstageMediaType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LIVE:"live",PHOTO:"photo",VIDEO:"video",WAS_LIVE:"was_live",UNKNOWN:"unknown"})}),null);
__d("NFXActionConst",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({APP_SUPPORT_REDIRECT:"APP_SUPPORT_REDIRECT",BAN_USER:"BAN_USER",BLOCK_ACTOR:"BLOCK_ACTOR",BLOCK_ACTOR_WITHOUT_DELAY:"BLOCK_ACTOR_WITHOUT_DELAY",BLOCK_APP:"BLOCK_APP",BLOCK_MESSAGES:"BLOCK_MESSAGES",BLOCK_PAGE:"BLOCK_PAGE",CLOSE_OLD_PROFILE:"CLOSE_OLD_PROFILE",CONTACT_FORM:"CONTACT_FORM",COMMENT_MODERATION:"COMMENT_MODERATION",OPEN_COMPOSER:"OPEN_COMPOSER",DELETE:"DELETE",DELETE_AND_BLOCK:"DELETE_AND_BLOCK",EDIT:"EDIT",EDIT_SENSITIVE_CONTENT:"EDIT_SENSITIVE_CONTENT",EDIT_SENSITIVE_CONTENT_WWW:"EDIT_SENSITIVE_CONTENT_WWW",EXPLORE_SEE_LESS:"EXPLORE_SEE_LESS",FOX_UNFOLLOW:"FOX_UNFOLLOW",FRX_PROFILE_REPORT_CONFIRMATION:"FRX_PROFILE_REPORT_CONFIRMATION",HIGHLIGHTS_UNFOLLOW:"HIGHLIGHTS_UNFOLLOW",CHEVRON_FEEDBACK_ENTRYPOINT:"CHEVRON_FEEDBACK_ENTRYPOINT",SAVE:"SAVE",HACKED_NOTIFY:"HACKED_NOTIFY",HELP_CENTER:"HELP_CENTER",HIDE_ADVERTISER:"HIDE_ADVERTISER",HIDE_FROM_TIMELINE:"HIDE_FROM_TIMELINE",HIDE_PHOTO_FROM_TIMELINE:"HIDE_PHOTO_FROM_TIMELINE",HIDE_RESEARCH_POLLS:"HIDE_RESEARCH_POLLS",HIDE_FEED_TOPIC:"HIDE_FEED_TOPIC",IGNORE_EVENT_INVITES:"IGNORE_EVENT_INVITES",IGNORE_MESSAGES:"IGNORE_MESSAGES",LEAVE_GROUP:"LEAVE_GROUP",LIMIT_FRIENDING_PRIVACY:"LIMIT_FRIENDING_PRIVACY",MARK_MESSAGE_THREAD_AS_SPAM:"MARK_MESSAGE_THREAD_AS_SPAM",MARK_AS_FALSE_NEWS:"MARK_AS_FALSE_NEWS",MARK_AS_SCAM:"MARK_AS_SCAM",MARK_AS_SPAM:"MARK_AS_SPAM",MARK_AS_SENSITIVE_CONTENT:"MARK_AS_SENSITIVE_CONTENT",MESSAGE:"MESSAGE",MESSENGER_REDIRECT:"MESSENGER_REDIRECT",MESSENGER_BLOCK_ACTOR:"MESSENGER_BLOCK_ACTOR",MESSENGER_IGNORE_CONVERSATION:"MESSENGER_IGNORE_CONVERSATION",MESSENGER_LEAVE_GROUP:"MESSENGER_LEAVE_GROUP",MESSENGER_MUTE_CONVERSATION:"MESSENGER_MUTE_CONVERSATION",MESSENGER_MUTE_STORY:"MESSENGER_MUTE_STORY",MESSENGER_REPORT_GROUP_MEMBER:"MESSENGER_REPORT_GROUP_MEMBER",MESSENGER_REPORT_USER:"MESSENGER_REPORT_USER",MESSENGER_REPORT_STORY:"MESSENGER_REPORT_STORY",NFX_AFTER_CONFIRMATION:"NFX_AFTER_CONFIRMATION",PHONE_FRIEND:"PHONE_FRIEND",RECOVER_PROFILE:"RECOVER_PROFILE",REDIRECT:"REDIRECT",REDIRECT_ADS_PREFERENCES:"REDIRECT_ADS_PREFERENCES",REMOVE_ADS_INTEREST:"REMOVE_ADS_INTEREST",REMOVE_EVENT:"REMOVE_EVENT",REPORT_ALREADY_REPORTED_CONTENT:"REPORT_ALREADY_REPORTED_CONTENT",REPEAT_REPORTER_REPORT_CONFIRMATION:"REPEAT_REPORTER_REPORT_CONFIRMATION",REPORT_CONTENT:"REPORT_CONTENT",REPORT_CONTENT_AFTER_CONFIRMATION:"REPORT_CONTENT_AFTER_CONFIRMATION",REPORT_CONTENT_WITH_TYPEAHEAD:"REPORT_CONTENT_WITH_TYPEAHEAD",REPORT_WORK_CONTENT:"REPORT_WORK_CONTENT",REPORT_CONTENT_EDUCATION:"REPORT_CONTENT_EDUCATION",REPORT_IP_VIOLATION:"REPORT_IP_VIOLATION",REPORT_IMAGE_PRIVACY_VIOLATION:"REPORT_IMAGE_PRIVACY_VIOLATION",REPORT_AD_IP_VIOLATION:"REPORT_AD_IP_VIOLATION",REPORT_AD_TO_GROUP_ADMIN:"REPORT_AD_TO_GROUP_ADMIN",REPORT_TO_GROUP_ADMIN:"REPORT_TO_GROUP_ADMIN",RESOLVE_PROBLEM:"RESOLVE_PROBLEM",RESOLVE_PROBLEM_REDIRECT:"RESOLVE_PROBLEM_REDIRECT",SPAM_CLEANUP_CHECKPOINT:"SPAM_CLEANUP_CHECKPOINT",GEO_SPECIFIC_HARASSMENT_HELPLINE:"GEO_SPECIFIC_HARASSMENT_HELPLINE",TOMBSTONE_SURVEY:"TOMBSTONE_SURVEY",ENABLE_TIMELINE_REVIEW:"ENABLE_TIMELINE_REVIEW",UNFOLLOW_FRIEND_LIST:"UNFOLLOW_FRIEND_LIST",UNFRIEND:"UNFRIEND",UNLIKE:"UNLIKE",UNSUBSCRIBE:"UNSUBSCRIBE",UNSUBSCRIBE_PAGE:"UNSUBSCRIBE_PAGE",UNSUBSCRIBE_DIRECTED_TARGET:"UNSUBSCRIBE_DIRECTED_TARGET",UNSUBSCRIBE_OWNER:"UNSUBSCRIBE_OWNER",UNSUBSCRIBE_RESHARER:"UNSUBSCRIBE_RESHARER",UNSUBSCRIBE_ATTACHED_STORY_ACTOR:"UNSUBSCRIBE_ATTACHED_STORY_ACTOR",UNSUBSCRIBE_ATTACHED_STORY_DIRECTED_TARGET:"UNSUBSCRIBE_ATTACHED_STORY_DIRECTED_TARGET",HIDE_APP:"HIDE_APP",SHARE_PHOTO_AS_STORY:"SHARE_PHOTO_AS_STORY",SHOW_MESSAGE_PREFILLS:"SHOW_MESSAGE_PREFILLS",SNOOZE_ACTOR:"SNOOZE_ACTOR",SNOOZE_DIRECTED_TARGET:"SNOOZE_DIRECTED_TARGET",SNOOZE_OWNER:"SNOOZE_OWNER",SNOOZE_RESHARER:"SNOOZE_RESHARER",SNOOZE_ATTACHED_STORY_PRIMARY_ACTOR:"SNOOZE_ATTACHED_STORY_PRIMARY_ACTOR",SNOOZE_ATTACHED_STORY_DIRECTED_TARGET:"SNOOZE_ATTACHED_STORY_DIRECTED_TARGET",SNOOZE_DOMAIN:"SNOOZE_DOMAIN",SNOOZE_APP:"SNOOZE_APP",KEYWORD_SNOOZE_ENTRYPOINT:"KEYWORD_SNOOZE_ENTRYPOINT",UNTAG:"UNTAG",UNTAG_PRODUCT_ITEMS:"UNTAG_PRODUCT_ITEMS",UNTAG_SPONSOR_PAGE:"UNTAG_SPONSOR_PAGE",HIDE:"HIDE",DONT_LIKE:"DONT_LIKE",HIDE_AD:"HIDE_AD",HIDE_AD_BREAKS:"HIDE_AD_BREAKS",HIDE_SHARED_AD_BREAK_HOST_VIDEO_STORY:"HIDE_SHARED_AD_BREAK_HOST_VIDEO_STORY",REPORT_AD:"REPORT_AD",PAGES_ACTIVE_ADS_REPORT_AD:"PAGES_ACTIVE_ADS_REPORT_AD",PAGES_ACTIVE_ADS_REPORT_ITEM:"PAGES_ACTIVE_ADS_REPORT_ITEM",POLITICAL_ARCHIVE_REPORT_AD:"POLITICAL_ARCHIVE_REPORT_AD",INTERN_SHOW_ADS_DEBUGGER_INFO:"INTERN_SHOW_ADS_DEBUGGER_INFO",HIDE_AD_WITH_AD_ALREADY_OWNED:"HIDE_AD_WITH_AD_ALREADY_OWNED",HIDE_AD_WITH_REMOVE_ITEM_FROM_AD:"HIDE_AD_WITH_REMOVE_ITEM_FROM_AD",HIDE_TOPIC_MISCLASSIFICATION:"HIDE_TOPIC_MISCLASSIFICATION",AD_ALREADY_OWNED:"AD_ALREADY_OWNED",REMOVE_ITEM_FROM_AD:"REMOVE_ITEM_FROM_AD",HEAD_PUBLISHER_APP_MENTIONS_BAN:"HEAD_PUBLISHER_APP_MENTIONS_BAN",HEAD_PUBLISHER_APP_MENTIONS_HIDE:"HEAD_PUBLISHER_APP_MENTIONS_HIDE",VOTING_REMINDER_OPT_OUT:"VOTING_REMINDER_OPT_OUT",LOCAL_ELECTIONS_REPORT:"LOCAL_ELECTIONS_REPORT",GOV_DIGEST_OPT_OUT:"GOV_DIGEST_OPT_OUT",VOTING_REMINDER_WRONG_LOCATION:"VOTING_REMINDER_WRONG_LOCATION",LESS_FROM_ACTOR:"LESS_FROM_ACTOR",LESS_FROM_DIRECTED_TARGET:"LESS_FROM_DIRECTED_TARGET",LESS_FROM_ATTACHED_STORY_ACTOR:"LESS_FROM_ATTACHED_STORY_ACTOR",LESS_FROM_DOMAIN:"LESS_FROM_DOMAIN",LESS_FROM_APP:"LESS_FROM_APP",LESS_FROM_THROWBACK:"LESS_FROM_THROWBACK",LESS_FROM_UPSETTING_CONCEPT:"LESS_FROM_UPSETTING_CONCEPT",THROWBACK_PREFERENCES:"THROWBACK_PREFERENCES",NEWSFEED_SETTINGS:"NEWSFEED_SETTINGS",CULTURAL_MOMENT_SEE_LESS:"CULTURAL_MOMENT_SEE_LESS",AWESOMIZER_UNFOLLOW_CARD:"AWESOMIZER_UNFOLLOW_CARD",AWESOMIZER_REFOLLOW_CARD:"AWESOMIZER_REFOLLOW_CARD",WRITE_IN:"WRITE_IN",DIRECT_SUPPORT:"DIRECT_SUPPORT",APP_INVITE_BLOCK_APP:"APP_INVITE_BLOCK_APP",APP_INVITE_BLOCK_USER:"APP_INVITE_BLOCK_USER",PAGES_LIKE_CHECKUP:"PAGES_LIKE_CHECKUP",COMPASSION_SUPPORT:"COMPASSION_SUPPORT",PYMA_XOUT:"PYMA_XOUT",PYMA_OPT_OUT:"PYMA_OPT_OUT",JOB_XOUT:"JOB_XOUT",JOB_UNIT_XOUT:"JOB_UNIT_XOUT",PSYM_UNIT_XOUT:"PSYM_UNIT_XOUT",DELETE_FUNDRAISER:"DELETE_FUNDRAISER",HIDE_BREAKING_NEWS_CARD:"HIDE_BREAKING_NEWS_CARD",HIDE_SHOW_PYMF:"HIDE_SHOW_PYMF",SELF_HARM_HELP_CENTER:"SELF_HARM_HELP_CENTER",MEMORIALIZATION_HELP_CENTER:"MEMORIALIZATION_HELP_CENTER",UNDERAGE_HELP_CENTER:"UNDERAGE_HELP_CENTER",HACKED_HELP_CENTER:"HACKED_HELP_CENTER",BULLYING_HELP_CENTER:"BULLYING_HELP_CENTER",STOLEN_GOODS_HELP_CENTER:"STOLEN_GOODS_HELP_CENTER",PRE_REPORT_CAPTCHA_SCREEN_REDIRECT:"PRE_REPORT_CAPTCHA_SCREEN_REDIRECT",PRE_REPORT_CONFIRMATION_SCREEN_REDIRECT:"PRE_REPORT_CONFIRMATION_SCREEN_REDIRECT",REPORT_ACTION_REQUIRING_EVIDENCE:"REPORT_ACTION_REQUIRING_EVIDENCE",SUPPORT_PLATFORM_REDIRECT_MESSAGE_AUTHOR:"SUPPORT_PLATFORM_REDIRECT_MESSAGE_AUTHOR",SUPPORT_PLATFORM_REDIRECT_MESSAGE_FRIEND:"SUPPORT_PLATFORM_REDIRECT_MESSAGE_FRIEND",SUPPORT_PLATFORM_REDIRECT_SEND_CARD:"SUPPORT_PLATFORM_REDIRECT_SEND_CARD",SUPPORT_PLATFORM_REDIRECT_LEARN:"SUPPORT_PLATFORM_REDIRECT_LEARN",FRX_PROFILE_REPORT_CONFIRMATION_REDIRECT:"FRX_PROFILE_REPORT_CONFIRMATION_REDIRECT",FRX_POLICY_CHECKLIST_REDIRECT:"FRX_POLICY_CHECKLIST_REDIRECT",FRX_NT_POLICY_CHECKLIST:"FRX_NT_POLICY_CHECKLIST",DISABLE_IG_UNCONNECTED_STORIES:"DISABLE_IG_UNCONNECTED_STORIES",FRX_NT_REPORT_GROUP_CHAT_MEMBER:"FRX_NT_REPORT_GROUP_CHAT_MEMBER",SIMPLE_ACTION_WHICH_REDIRECTS:"SIMPLE_ACTION_WHICH_REDIRECTS"})}),null);
__d("FBStoriesStoryCardHelper",["CameraPostTypes","CurrentUser","NFXActionConst"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getId:function(a){return((a=a)!=null?a.id:a)||""},getActor:function(a){a=(a=a)!=null?a.actors:a;return a?a[0]:null},getMedia:function(a){a=(a=a)!=null?a.attachments:a;return a?a[0].media:null},getActivityDescription:function(a){return(a=a)!=null?a.activity_description:a},getBackdropImage:function(a){a=(a=a)!=null?(a=a.backdrop)!=null?(a=a.media)!=null?(a=a.image)!=null?a.uri:a:a:a:a;return{image:{uri:a}}},getCameraPostSource:function(a){return((a=a)!=null?(a=a.story_card_info)!=null?(a=a.logging)!=null?a.source:a:a:a)||"CAMERA_SYSTEM"},getCameraPostType:function(a){return((a=a)!=null?(a=a.story_card_info)!=null?a.story_card_type:a:a)||b("CameraPostTypes").STORY},getDefaultBackground:function(a){return((a=a)!=null?a.story_default_background:a)||null},getExplicitPlace:function(a){return((a=a)!=null?a.explicit_place:a)||null},getInlineActivities:function(a){return((a=a)!=null?a.inline_activities:a)||null},getInstagramProfileURL:function(a){return((a=a)!=null?(a=a.story_card_info)!=null?a.instagram_profile_url:a:a)||null},getIsPlainText:function(a){return((a=a)!=null?(a=a.story_card_info)!=null?a.is_plain_text:a:a)||!1},isSeenByViewer:function(a){return!!((a=a)!=null?(a=a.story_card_seen_state)!=null?a.is_seen_by_viewer:a:a)},getMediaBackground:function(a){a=(a=a)!=null?(a=a.story_card_info)!=null?(a=a.background_color_info)!=null?a.color_info:a:a:a;return a?a[0]:null},getMessageText:function(a){return((a=a)!=null?(a=a.message)!=null?a.text:a:a)||""},getTextFormatMetadata:function(a){return((a=a)!=null?a.text_format_metadata:a)||null},getTime:function(a){return((a=a)!=null?a.creation_time:a)||0},getOriginalPostStoryAttribution:function(a){return((a=a)!=null?(a=a.story_card_info)!=null?a.shareable_attribution:a:a)||null},getWithTags:function(a){return((a=a)!=null?a.with_tags:a)||null},getNegativeFeedbackActions:function(a){if(!a)return null;a=(a=a)!=null?(a=a.negative_feedback_actions)!=null?a.edges:a:a;return a?a.map(function(a){return a.node}).filter(function(a){return a&&this._shouldRenderNFXAction(a.negative_feedback_action_type)}.bind(this)):null},_shouldRenderNFXAction:function(a){switch(a){case b("NFXActionConst").UNTAG:return!0;default:return!1}},isLandscape:function(a){a=this.getMedia(a);return a.image.height<a.image.width},getStoryOverlays:function(a){return((a=a)!=null?a.story_overlays:a)||[]},getPoll:function(a){a=this.getStoryOverlays(a).find(function(a){return a.__typename==="StoryOverlayPollSticker"});return!a?null:(a=a)!=null?a.poll:a},getPollVoters:function(a){a=this.getPoll(a);return!a?{}:(a.poll_options||[]).reduce(function(a,b){var c;c=(c=b)!=null?(c=c.voters)!=null?c.nodes:c:c;if(!c||c.length===0)return a;c.forEach(function(c){return a[c.id]=b.index});return a},{})},getStoryViewerId:function(a){return(a=a)!=null?(a=a.node)!=null?a.id:a:a},getStoryViewerSeenTime:function(a){return((a=a)!=null?a.seen_time:a)||0},getSeenReceiptsLastSeenTime:function(a){return((a=a)!=null?(a=a.story_card_seen_state)!=null?a.seen_receipts_last_seen_time:a:a)||0},getNonFriendsSeenCount:function(a){return((a=a)!=null?(a=a.story_card_seen_state)!=null?(a=a.seen_receipent_seen_followers)!=null?a.count:a:a:a)||0},getfriendsSeenCount:function(a){return((a=a)!=null?(a=a.story_card_seen_state)!=null?(a=a.seen_receipent_seen_friends)!=null?a.count:a:a:a)||0},getThreadViewers:function(a,c){__p&&__p();var d={hasNewViewers:!1,hasNewFriendViewers:!1,hasNewConnectionsViewers:!1,friends:[],connections:[],totalCount:0,totalNew:0,nonFriendsCount:0};if(!c||!a)return d;var e=(c=a)!=null?c.isCardViewed:c,f=this.getPollVoters(a);c=((c=a)!=null?(c=c.story_card_info)!=null?(c=c.story_viewers)!=null?c.edges:c:c:c)||[];var g=b("CurrentUser").getID();d=c.reduce(function(b,c){__p&&__p();var d=this.getStoryViewerId(c);if(!d)return b;if(d!==g){var h;h=((h=c)!=null?(h=h.node)!=null?h.is_viewer_friend:h:h)||!1;var i=h?"friends":"connections",j=this.getStoryViewerSeenTime(c),k=this.getStoryViewerReactions(c),l=j>=this.getSeenReceiptsLastSeenTime(a);b[i].push(babelHelpers["extends"]({},c.node,{seenTime:j,isNewViewer:l,reactions:k,votedPollOptionIndex:f[d]}));b.totalNew+=l?1:0;b.hasNewViewers=(b.hasNewViewers||l)&&!e;b.hasNewFriendViewers=b.hasNewFriendViewers||l&&h;b.hasNewConnectionsViewers=b.hasNewViewers||l&&!h}return b}.bind(this),d);var h=this.getNonFriendsSeenCount(a);return Object.assign(d,{totalCount:h+c.length,nonFriendsCount:h})},getStoryViewerReactions:function(a){var b;a=((a=a)!=null?(a=a.feedback)!=null?a.lightweight_reactions:a:a)||[];a=a&&a.length>0?((b=a[0])!=null?(b=b.messaging_actions)!=null?b.nodes:b:b)||[]:[];return a.map(function(a){return a.reaction})},getAllowedNavigationType:function(a,b){var c=a===0;a=a===b-1;if(c)return"NEXT_ONLY";return a?"PREV_ONLY":"BOTH"},getCurrentCardData:function(a,b){var c=this.getActor(a),d=this.getTextFormatMetadata(a),e=null,f=null;d&&(e={body_style:d.font_style,preset_id:d.preset_id,text_input_style:d.text_input_style,swatch_style:{background_color:d.background_color,background_image:d.background_image}},f={portrait_background_image:d.portrait_background_image,portrait_keyframes_animation:d.portrait_keyframes_animation});d={id:c.id,name:c.name,short_name:c.short_name,gender:c.gender,is_viewer_friend:c.is_viewer_friend,profile_picture:c.profile_picture};return{activityDescription:this.getActivityDescription(a),backdropImage:this.getBackdropImage(a),bucketOwner:d,cameraPostSource:this.getCameraPostSource(a),cameraPostType:this.getCameraPostType(a),defaultBackground:this.getDefaultBackground(a),explicitLocation:this.getExplicitPlace(a),inlineActivities:this.getInlineActivities(a),instagramProfileURL:this.getInstagramProfileURL(a),isLive:!1,isPlainText:this.getIsPlainText(a),isSeen:this.isSeenByViewer(a),latestMessageID:null,linkAttachment:null,media:this.getMedia(a),mediaBackground:this.getMediaBackground(a),messageText:this.getMessageText(a),delightRanges:[],participants:[],textFormatMetadata:f,threadOwner:{name:c.name,id:c.id,is_viewer_friend:c.is_viewer_friend,profile_picture:c.profile_picture},time:this.getTime(a),threadID:b,originalPostStoryAttribution:this.getOriginalPostStoryAttribution(a),withTags:this.getWithTags(a),wwwTextFormatMetadata:e,negativeFeedbackActions:this.getNegativeFeedbackActions(a)}}};e.exports=a}),null);
__d("FBStoriesThreadHelper",["CameraPostMediaHelper","CameraPostThreadOwnerHelper","CameraPostTypes","FBStoriesStoryCardHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getId:function(a){return((a=a)!=null?a.id:a)||""},getCameraPostType:function(a){return((a=a)!=null?a.camera_post_type:a)||b("CameraPostTypes").STORY},getCameraPostSource:function(a){return((a=a)!=null?a.post_source:a)||"CAMERA_SYSTEM"},isSeenByViewer:function(a){return!!((a=a)!=null?a.is_seen_by_viewer:a)},notSeenByViewer:function(a){return!g.isSeenByViewer(a)},setIsSeenByViewer:function(a,b){if(!a)return;a.is_seen_by_viewer=b},getLatestMessageID:function(a){return(a=a)!=null?(a=a.latest_message)!=null?a.id:a:a},getStatus:function(a){return(a=a)!=null?a.thread_status:a},isReviewStatusPending:function(a){a=g._getReviewStatus(a);return a==="PENDING"||a==="DENIED"},_getReviewStatus:function(a){return(a=a)!=null?a.thread_review_status:a},getTime:function(a){return((a=a)!=null?a.time:a)||0},getExpiryTime:function(a){return((a=a)!=null?a.thread_expiry_time:a)||0},isExpired:function(a){a=g.getExpiryTime(a);return!a?!1:a<Date.now()/1e3},isUploading:function(a){return g.getStatus(a)==="UPLOADING"},isPending:function(a){return g.getStatus(a)==="PENDING"},isPublished:function(a){return g.getStatus(a)==="PUBLISHED"},getNonFriendsSeenCount:function(a){return((a=a)!=null?a.non_friends_seen_count:a)||0},setNonFriendsSeenCount:function(a,b){if(!a)return;a.non_friends_seen_count=b},getFriendsSeenCount:function(a){return((a=a)!=null?a.friends_seen_count:a)||0},setFriendsSeenCount:function(a,b){if(!a)return;a.friends_seen_count=b},getSeenReceiptsLastSeenTime:function(a){return((a=a)!=null?a.seen_receipts_last_seen_time:a)||0},setSeenReceiptsLastSeenTime:function(a,b){if(!a)return;a.seen_receipts_last_seen_time=b},getSeenReceiptsUnseenCount:function(a){return((a=a)!=null?a.seen_receipts_unseen_count:a)||0},doesThreadHasUnseenViewers:function(a){return!a?!1:g.getSeenReceiptsUnseenCount(a)>0||g.getSeenReceiptsFollowersUnseenCount(a)>0},getSeenReceiptsFollowersUnseenCount:function(a){return((a=a)!=null?a.seen_receipts_followers_unseen_count:a)||0},setSeenReceiptsUnseenCount:function(a,b){if(!a)return;a.seen_receipts_unseen_count=b},setSeenReceiptsFollowersUnseenCount:function(a,b){if(!a)return;a.seen_receipts_followers_unseen_count=b},getOwner:function(a){return(a=a)!=null?a.camera_post_thread_owner:a},getOwnerId:function(a){return b("CameraPostThreadOwnerHelper").getId(g.getOwner(a))},isViewerFriendOfOwner:function(a){return b("CameraPostThreadOwnerHelper").getIsViewerFriend(g.getOwner(a))},getViewers:function(a){return((a=a)!=null?(a=a.story_thread_viewers)!=null?a.edges:a:a)||[]},setViewers:function(a,b){if(!a)return;a.story_thread_viewers={edges:b}},getRootMessage:function(a){return(a=a)!=null?a.root_message:a},getStoryOverlays:function(a){return!a?[]:((a=g.getRootMessage(a))!=null?a.story_overlays:a)||[]},getPoll:function(a){a=this.getStoryOverlays(a).find(function(a){return a.__typename==="StoryOverlayPollSticker"});return!a?null:(a=a)!=null?a.poll:a},getPollVoters:function(a){a=this.getPoll(a);return!a?{}:(a.poll_options||[]).reduce(function(a,b){var c;c=(c=b)!=null?(c=c.voters)!=null?c.nodes:c:c;if(!c||c.length===0)return a;c.forEach(function(c){return a[c.id]=b.index});return a},{})},getMedia:function(a){return(a=g.getRootMessage(a))!=null?a.message_media:a},getMediaId:function(a){return b("CameraPostMediaHelper").getId(g.getMedia(a))},getMediaType:function(a){return b("CameraPostMediaHelper").getType(g.getMedia(a))},getMediaPreviewImage:function(a){return b("CameraPostMediaHelper").getPreviewImage(g.getMedia(a))},getWWWTextFormatMetadata:function(a){return((a=g.getRootMessage(a))!=null?a.www_text_format_metadata:a)||null},getIsPlainText:function(a){return((a=g.getRootMessage(a))!=null?a.is_plain_text:a)||!1},getTextFormatMetadata:function(a){return((a=g.getRootMessage(a))!=null?a.text_format_metadata:a)||null},getBackdropImage:function(a){return((a=g.getRootMessage(a))!=null?a.backdrop_image:a)||null},getMessageText:function(a){return((a=g.getRootMessage(a))!=null?a.message_text:a)||""},getDelightRanges:function(a){return((a=g.getRootMessage(a))!=null?a.delight_ranges:a)||[]},getActivityDescription:function(a){return!a?null:a.activity_description||null},getMediaBackground:function(a){if(!a)return null;a=(a=a.background_color_info)!=null?a.color_info:a;return a&&a.length>0?a[0]:null},getLinkAttachment:function(a){return!a?null:a.share_story_attachment||null},getWithTags:function(a){return!a?null:a.with_tags||null},getDefaultBackground:function(a){return!a?null:a.story_default_background||null},getExplicitLocation:function(a){return!a?null:a.explicit_place||null},getInlineActivities:function(a){return!a?null:a.inline_activities||null},getInstagramProfileURL:function(a){return((a=a)!=null?a.instagram_profile_url:a)||null},getOriginalPostStoryAttribution:function(a){return!a?null:((a=g.getRootMessage(a))!=null?a.original_post_story_attribution:a)||null},getNegativeFeedbackActions:function(a){return b("FBStoriesStoryCardHelper").getNegativeFeedbackActions(a)},getStoryViewerId:function(a){return(a=a)!=null?(a=a.node)!=null?a.id:a:a},getStoryViewerSeenTime:function(a){return((a=a)!=null?a.seen_time:a)||0},getStoryViewerReactions:function(a){var b;a=((a=a)!=null?(a=a.feedback)!=null?a.lightweight_reactions:a:a)||[];a=a&&a.length>0?((b=a[0])!=null?(b=b.messaging_actions)!=null?b.nodes:b:b)||[]:[];return a.map(function(a){return a.reaction})},makeOptimisticPhotoThread:function(a){var c=this._getDefaultThread();a=b("CameraPostMediaHelper").makeOptimisticPhotoMedia(a);return babelHelpers["extends"]({},c,{is_seen_by_viewer:!1,root_message:{message_media:a},thread_expiry_time:Math.floor(Date.now()/1e3+24*60*60),thread_status:"UPLOADING",time:Math.floor(Date.now()/1e3)})},_getDefaultThread:function(){return{id:null,camera_post_type:null,post_source:null,time:null,thread_expiry_time:null,seen_receipts_last_seen_time:null,seen_receipts_unseen_count:null,seen_receipts_followers_unseen_count:null,thread_status:null,thread_review_status:null,root_message:{message_media:null,delight_ranges:[]},latest_message:{id:null},is_seen_by_viewer:null,is_user_story_thread_viewer:null,camera_post_thread_owner:null,friends_seen_count:null,non_friends_seen_count:null,story_thread_viewers:{edges:null},activity_description:null}}};e.exports=g}),null);
__d("FBStoriesBucketHelper",["CameraPostBucketOwnerHelper","CameraPostTypes","CameraPostTypesHelper","CurrentUser","FBStoriesLoggingConstants","FBStoriesThreadHelper","QE2Logger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getUnseenThread:function(a){var b=h.getThreads(a);return b[Math.max(0,h.getUnseenThreadIndex(a))]}},h={isUserBucket:function(a){return h.getOwnerId(a)===b("CurrentUser").getID()},getLiveVideo:function(a){return(a=a)!=null?a.live_video:a},getMediaIDForLiveBucket:function(a){return(a=a)!=null?(a=a.live_video)!=null?a.id:a:a},isLive:function(a){return!!((a=h.getLiveVideo(a))!=null?a.id:a)},setLiveVideo:function(a,b){if(!a)return;a.live_video=b},hasData:function(a){return!a?!1:this.isLive(a)||h.getThreads(a).length>0},getThreads:function(a){var c=b("CurrentUser").getID(),d=h.getOwnerId(a),e=c===d;d=((c=a)!=null?(c=c.threads)!=null?c.nodes:c:c)||[];return d.filter(function(a){return(e&&b("FBStoriesThreadHelper").isPending(a)||b("FBStoriesThreadHelper").isPublished(a)||b("FBStoriesThreadHelper").isUploading(a))&&!b("FBStoriesThreadHelper").isExpired(a)})},getPendingThreads:function(a){return((a=a)!=null?(a=a.pending_threads)!=null?a.nodes:a:a)||[]},getThreadIDs:function(a){a=h.getThreads(a);return a.map(function(a){return((a=a)!=null?a.id:a)||""})},setThreads:function(a,b){if(!a)return;a.threads={nodes:b}},setPendingThreads:function(a,b){if(!a)return;a.pending_threads={nodes:b}},getUnseenThreadIndex:function(a){var c=h.getThreads(a);a=h.isUserBucket(a);return a?c.findIndex(b("FBStoriesThreadHelper").doesThreadHasUnseenViewers):c.findIndex(b("FBStoriesThreadHelper").notSeenByViewer)},hasNewViewers:function(a){if(!a)return!1;a=this.getThreads(a);a=a.filter(b("FBStoriesThreadHelper").doesThreadHasUnseenViewers);return a.length>0},hasUnseenThreads:function(a){return this.getThreads(a).findIndex(b("FBStoriesThreadHelper").notSeenByViewer)>=0},getPreviewImage:function(a){a=g.getUnseenThread(a);return b("FBStoriesThreadHelper").getMediaPreviewImage(a)},shouldEnablePageStoryReply:function(a){var c=b("CameraPostTypesHelper").isPageStory(h.getCameraPostType(a));if(c){c=b("CurrentUser").getID();b("QE2Logger").logExposureForUser("page_story_reply_www",c);c=h.getOwner(a);return c.is_eligible_for_story_reply==undefined?!1:c.is_eligible_for_story_reply}return!1},getId:function(a){return((a=a)!=null?a.id:a)||""},getCameraPostType:function(a){return((a=a)!=null?a.camera_post_type:a)||b("CameraPostTypes").STORY},getUnseenCount:function(a){return((a=a)!=null?a.unseen_count:a)||0},setUnseenCount:function(a,b){if(!a)return;a.unseen_count=b},hasLiveVideoEnded:function(a){return!!((a=a)!=null?a.has_live_video_ended:a)},setHasLiveVideoEnded:function(a,b){if(!a)return;a.has_live_video_ended=b},getOwner:function(a){return((a=a)!=null?a.camera_post_bucket_owner:a)||{id:null,name:null,short_name:null,gender:null,is_viewer_friend:!1,profile_picture:null}},getOwnerId:function(a){return b("CameraPostBucketOwnerHelper").getId(h.getOwner(a))},getOwnerGender:function(a){return b("CameraPostBucketOwnerHelper").getGender(h.getOwner(a))},isOwnerEmployee:function(a){return b("CameraPostBucketOwnerHelper").isEmployee(h.getOwner(a))},isViewerEventHost:function(a){return b("CameraPostBucketOwnerHelper").isEventHost(h.getOwner(a))},isViewerPageContentAdmin:function(a){return b("CameraPostBucketOwnerHelper").isViewerPageContentAdmin(h.getOwner(a))},isViewerGroupAdmin:function(a){return b("CameraPostBucketOwnerHelper").isViewerGroupAdmin(h.getOwner(a))},isViewerGroupModerator:function(a){return b("CameraPostBucketOwnerHelper").isViewerGroupModerator(h.getOwner(a))},isViewerFriendOfOwner:function(a){return b("CameraPostBucketOwnerHelper").isViewerFriend(h.getOwner(a))},getOwnerProfilePictureUri:function(a){return b("CameraPostBucketOwnerHelper").getProfilePictureUri(h.getOwner(a))},getOwnerCoverPhotoUri:function(a){return b("CameraPostBucketOwnerHelper").getCoverPhotoUri(h.getOwner(a))},getOwnerName:function(a,c){c===void 0&&(c=!1);var d=h.getCameraPostType(a);a=h.getOwner(a);if(!c&&b("CameraPostTypesHelper").isStory(d)&&a.short_name)return a.short_name;else return a.name},getLatestThreadCreationTime:function(a){return!a?null:(a=a)!=null?a.latest_thread_creation_time:a},getLoggingType:function(a){__p&&__p();if(!a)return b("FBStoriesLoggingConstants").MISSING_STORY_DATA;if(h.isUserBucket(a))return b("FBStoriesLoggingConstants").SELF_STORY;var c=h.getCameraPostType(a);if(b("CameraPostTypesHelper").isPageStory(c))return b("FBStoriesLoggingConstants").PAGE_STORY;if(b("CameraPostTypesHelper").isGroupStory(c))return b("FBStoriesLoggingConstants").GROUP_STORY;if(b("CameraPostTypesHelper").isEventStory(c))return b("FBStoriesLoggingConstants").EVENT_STORY;if(b("CameraPostTypesHelper").isPromotionStory(c))return b("FBStoriesLoggingConstants").STORY_PROMOTION;return!h.isViewerFriendOfOwner(a)?b("FBStoriesLoggingConstants").FOLLOWEE_STORY:b("FBStoriesLoggingConstants").FRIEND_STORY},addThreadToBucket:function(a,b){var c=h.getThreads(a);h.setThreads(a,c.concat(b))},getDefaultBucket:function(){return{id:null,camera_post_type:null,unseen_count:0,ranking:null,live_video:null,camera_post_bucket_owner:null,threads:null,pending_threads:null,latest_thread_creation_time:null}},isUploading:function(a){if(!a)return!1;a=(a=a)!=null?a.is_uploading:a;return!!a},setUploading:function(a,b){if(!a)return;a.is_uploading=b}};e.exports=h}),null);
__d("FBStoriesLiveVideoActionTypes",["keyMirror"],(function(a,b,c,d,e,f){a=b("keyMirror")({SET_UI_COMPONENTS:null,REMOVE_UI_COMPONENTS:null,LIVE_BUCKET_LOADED:null,LOAD_UI_COMPONENTS_FAILED:null});e.exports=a}),null);
__d("FBStoriesMutedBucketOwnerHelper",[],(function(a,b,c,d,e,f){"use strict";a={getId:function(a){return((a=a)!=null?a.id:a)||""},getName:function(a){return((a=a)!=null?a.name:a)||""},getProfilePictureUri:function(a){return((a=a)!=null?a.profilePictureUri:a)||""},getMuted:function(a){return!!((a=a)!=null?a.muted:a)},setMuted:function(a,b){a.muted=b}};e.exports=a}),null);
__d("FBStoriesMutedBucketOwnersActionTypes",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({LOADING:"FB_STORIES_MUTED_BUCKET_OWNERS.LOADING",LOADED:"FB_STORIES_MUTED_BUCKET_OWNERS.LOADED",LOADED_ERROR:"FB_STORIES_MUTED_BUCKET_OWNERS.LOADED_ERROR",SET_IS_CURRENTLY_MUTING:"FB_STORIES_MUTED_BUCKET_OWNERS.SET_IS_CURRENTLY_MUTING",UPDATE_MUTED_OPTIMISTIC:"FB_STORIES_MUTED_BUCKET_OWNERS.UPDATE_MUTED_OPTIMISTIC"});e.exports=a}),null);
__d("fbStoriesMutedBucketOwnersSelectors",[],(function(a,b,c,d,e,f){"use strict";var g={isLoading:function(a){return a.data.isLoading()},getMutedBucketOwners:function(a){a=a.data;return a.hasValue()?a.getValueEnforcing():[]},getCurrentlyMutingBucketOwners:function(a){return a.currentlyMutingBucketOwners},isCurrentlyMutingBucketOwners:function(a){return g.getCurrentlyMutingBucketOwners(a).length!==0},canReload:function(a){return!this.isCurrentlyMutingBucketOwners(a)&&!this.isLoading(a)}};e.exports=g}),null);
__d("fbStoriesMutedBucketOwnersReducer",["FBStoriesMutedBucketOwnerHelper","FBStoriesMutedBucketOwnersActionTypes","LoadObject","fbStoriesMutedBucketOwnersSelectors"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();switch(c.type){case b("FBStoriesMutedBucketOwnersActionTypes").LOADING:return babelHelpers["extends"]({},a,{data:b("LoadObject").loading()});case b("FBStoriesMutedBucketOwnersActionTypes").LOADED:return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue(c.data),currentlyMutingBucketOwners:[]});case b("FBStoriesMutedBucketOwnersActionTypes").LOADED_ERROR:return babelHelpers["extends"]({},a,{data:b("LoadObject").withError(new Error(c.error.errorSummary))});case b("FBStoriesMutedBucketOwnersActionTypes").SET_IS_CURRENTLY_MUTING:var d=a.currentlyMutingBucketOwners,e=a.currentlyMutingBucketOwners.indexOf(c.ownerID);c.value&&e===-1?(d=d.slice(),d.push(c.ownerID)):!c.value&&e!==-1&&(d=d.slice(),d.splice(e,1));return babelHelpers["extends"]({},a,{currentlyMutingBucketOwners:d});case b("FBStoriesMutedBucketOwnersActionTypes").UPDATE_MUTED_OPTIMISTIC:e=b("fbStoriesMutedBucketOwnersSelectors").getMutedBucketOwners(a);var f=c.value;d=!1;var g=e.map(function(a){if(b("FBStoriesMutedBucketOwnerHelper").getId(a)===c.ownerID){var e=babelHelpers["extends"]({},a);d=!0;b("FBStoriesMutedBucketOwnerHelper").setMuted(e,f);return e}else return a});d||(g=e.concat({id:c.ownerID,name:c.ownerName,profilePictureUri:c.ownerProfilePictureUri,muted:f}));return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue(g)});default:return a}}e.exports=a}),null);
__d("FBStoriesMutedBucketOwnersStore",["FBStoriesDispatcher","FluxReduceStore","LoadObject","fbStoriesMutedBucketOwnersReducer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return{data:b("LoadObject").empty(),currentlyMutingBucketOwners:[]}};a.prototype.reduce=function(a,c){return b("fbStoriesMutedBucketOwnersReducer")(a,c)};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("FBStoriesDispatcher"))}),null);
/**
 * License: https://www.facebook.com/legal/license/szRD2xg2JXY/
 */
__d("reselect-3.0.1",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={},h={exports:g};function i(){__p&&__p();g.__esModule=!0;g.defaultMemoize=c;g.createSelectorCreator=e;g.createStructuredSelector=h;function a(a,b){return a===b}function b(a,b,c){if(b===null||c===null||b.length!==c.length)return!1;var d=b.length;for(var e=0;e<d;e++)if(!a(b[e],c[e]))return!1;return!0}function c(c){var d=arguments.length>1&&arguments[1]!==undefined?arguments[1]:a,e=null,f=null;return function(){b(d,e,arguments)||(f=c.apply(null,arguments));e=arguments;return f}}function d(a){a=Array.isArray(a[0])?a[0]:a;if(!a.every(function(a){return typeof a==="function"})){var b=a.map(function(a){return typeof a}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+b+"]"))}return a}function e(a){__p&&__p();for(var b=arguments.length,e=Array(b>1?b-1:0),f=1;f<b;f++)e[f-1]=arguments[f];return function(){__p&&__p();for(var b=arguments.length,f=Array(b),g=0;g<b;g++)f[g]=arguments[g];var h=0,i=f.pop(),j=d(f),k=a.apply(undefined,[function(){h++;return i.apply(null,arguments)}].concat(e)),l=c(function(){var a=[],b=j.length;for(var c=0;c<b;c++)a.push(j[c].apply(null,arguments));return k.apply(null,a)});l.resultFunc=i;l.recomputations=function(){return h};l.resetRecomputations=function(){return h=0};return l}}var f=g.createSelector=e(c);function h(a){__p&&__p();var b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:f;if(typeof a!=="object")throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof a);var c=Object.keys(a);return b(c.map(function(b){return a[b]}),function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];return b.reduce(function(a,b,d){a[c[d]]=b;return a},{})})}}var j=!1,k=function(){j||(j=!0,i());return h.exports};a=function(a){switch(a){case undefined:return k()}};e.exports=a}),null);
__d("reselect",["reselect-3.0.1"],(function(a,b,c,d,e,f){e.exports=b("reselect-3.0.1")()}),null);
__d("fbStoriesRootSelectors",["FBStoriesBucketHelper","reselect"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("reselect").createSelector;var g=function(a,b,c){return c===0?a:(a=b)!=null?a[c-1]:a};c=function(a){return a.data};d=a([c],function(a){return a.hasValue()?a.getValueEnforcing():{friendsBucketData:[],userBucketData:b("FBStoriesBucketHelper").getDefaultBucket(),userInfo:{userName:"",userID:"",userGender:"",userProfilePic:{uri:""}}}});f=a(c,function(a){return a.isLoading()});c=a([d],function(a){return a.userBucketData||{}});var h=a([c],function(a){return a&&a.id}),i=a([d],function(a){return a.friendsBucketData||[]}),j=a([i],function(a){return a.map(function(a){return a.id?a.id:""})});h=a([j,h],function(b,a){return[a].concat(b)});d=a([d],function(a){return a.userInfo||{}});var k=function(a){return a.selectedBucketIndex};k=a([k,c,i],function(b,c,a){return g(c,a,b)});var l=a([k],function(a){return a&&a.id}),m=a(c,function(a){return b("FBStoriesBucketHelper").isUploading(a)});a=a([i,c],function(a,c){c=[c].concat(a);return c.reduce(function(a,c){if(!c||!c.id)return a;if(!b("FBStoriesBucketHelper").hasData(c))return a;c={bucketID:b("FBStoriesBucketHelper").getId(c),cameraPostType:b("FBStoriesBucketHelper").getCameraPostType(c),owner:b("FBStoriesBucketHelper").getOwner(c),previewImageUri:b("FBStoriesBucketHelper").getPreviewImage(c),profileImageUri:b("FBStoriesBucketHelper").getOwnerProfilePictureUri(c),hasUnseenThreads:b("FBStoriesBucketHelper").hasUnseenThreads(c),hasNewViewers:b("FBStoriesBucketHelper").hasNewViewers(c),ownedByViewer:b("FBStoriesBucketHelper").isUserBucket(c),isLive:b("FBStoriesBucketHelper").isLive(c),latestThreadCreationTime:b("FBStoriesBucketHelper").getLatestThreadCreationTime(c),actorName:b("FBStoriesBucketHelper").getOwnerName(c,!0),actorShortName:b("FBStoriesBucketHelper").getOwnerName(c),actorGender:b("FBStoriesBucketHelper").getOwnerGender(c)};return a.concat([c])},[])});e.exports={bucketDescriptors:a,loading:f,userBucketData:c,friendsBucketData:i,friendsBucketIds:j,userInfo:d,bucketIds:h,selectedBucket:k,selectedBucketId:l,uploading:m}}),null);
__d("fbStoriesStateSelectors",["FBStoriesBucketHelper","fbStoriesRootSelectors"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("fbStoriesRootSelectors").bucketIds,h=b("fbStoriesRootSelectors").friendsBucketData,i=b("fbStoriesRootSelectors").selectedBucketId,j=b("fbStoriesRootSelectors").userBucketData,k={bucketByBucketId:function(a,b){b=k.bucketIndexByBucketId(a,b);return k.bucketByIndex(a,b)},bucketByIndex:function(a,b){return b===0?j(a):(a=h(a))!=null?a[b-1]:a},bucketIndexByBucketId:function(a,b){a=g(a);return a.indexOf(b)},isOwnBucket:function(a,c){return(c!=undefined?c:i(a))===b("FBStoriesBucketHelper").getId(j(a))},isProductionDialogLoading:function(a){return a.isProductionDialogLoading}};e.exports=k}),null);
__d("friendsBucketSorter",["CameraPostTypesHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return function(b,c){var d=b.live_video&&b.live_video.id,e=c.live_video&&c.live_video.id;if(d!==e)return d?-1:1;if(g(b,c))return i(b)?-1:1;if(h(b,c))return j(b)?-1:1;return k(b,c,a)?l(b,a)?-1:1:n(b)>=n(c)?-1:1}}function g(a,b){return m(a,b,i)}function h(a,b){return m(a,b,j)}function i(a){return a.unseen_count>0}function j(a){return b("CameraPostTypesHelper").isEventStory(a.camera_post_type)}function k(a,b,c){return l(a,c)!==l(b,c)}function l(a,b){a=((a=a)!=null?(a=a.threads)!=null?a.nodes:a:a)||[];for(var c=0;c<a.length;c++){var d;d=(d=a[c])!=null?(d=d.camera_post_thread_owner)!=null?d.id:d:d;if(d===b)return!0}return!1}function m(a,b,c){a=c(a);c=c(b);return a!=c}function n(a){return((a=a)!=null?(a=a.ranking)!=null?a.score:a:a)||0}e.exports=a}),null);
__d("FBStoriesStore",["BackstageMediaType","CameraPostMediaHelper","CameraPostTypes","FBStoriesActionTypes","FBStoriesBucketHelper","FBStoriesDataHelper","FBStoriesDispatcher","FBStoriesLiveVideoActionTypes","FBStoriesMutedBucketOwnersStore","FBStoriesThreadHelper","FluxReduceStore","LoadObject","fbStoriesMutedBucketOwnersSelectors","fbStoriesRootSelectors","fbStoriesStateSelectors","friendsBucketSorter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return{data:b("LoadObject").empty(),selectedBucketIndex:-1,currentThreadIndex:-1,currentThreadPercentDone:0,unseenMode:!1,allBucketsViewed:!1,lastViewedThreadIndexForBucket:new Map(),isProductionDialogLoading:!1,isCommercialBreakRunning:new Map(),isViewerOpen:!1,subscriptionToken:null,viewerEntrypoint:null}};a.prototype.reduce=function(a,c){__p&&__p();switch(c.type){case b("FBStoriesActionTypes").LOADING:return babelHelpers["extends"]({},a,{data:b("LoadObject").loading()});case b("FBStoriesActionTypes").LOADED:var d=c.data,e=d.userInfo;d=d.userBucketData;var f=c.data.friendsBucketData;f=b("FBStoriesDataHelper").getFriendsDataWithEndedLiveBucket(f,this.$FBStoriesStore1(),this.isOwnBucket(this.getSelectedBucketId()));return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userInfo:e,userBucketData:d,friendsBucketData:f})});case b("FBStoriesActionTypes").VIEWER_LIST_LOADED_FOR_THREAD:var g=c.data.node;e=babelHelpers["extends"]({},this.getUserBucketData(),{threads:{nodes:this.$FBStoriesStore2().map(function(a){if(b("FBStoriesThreadHelper").getId(a)===c.threadID){var d=babelHelpers["extends"]({},a);b("FBStoriesThreadHelper").setFriendsSeenCount(d,b("FBStoriesThreadHelper").getFriendsSeenCount(g));b("FBStoriesThreadHelper").setNonFriendsSeenCount(d,b("FBStoriesThreadHelper").getNonFriendsSeenCount(g));b("FBStoriesThreadHelper").setViewers(d,b("FBStoriesThreadHelper").getViewers(g));return d}return a})}});return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:e,userInfo:this.getUserInfo(),friendsBucketData:this.getFriendsBucketData()})});case b("FBStoriesActionTypes").SUBSCRIPTION_BUCKET_UPDATE:var h=c.bucketData;d=b("FBStoriesBucketHelper").getOwnerId(h);if(this.isMutedBucketOwner(d))return a;f=b("FBStoriesBucketHelper").getThreads(h);var i=f.length>0||this.$FBStoriesStore3(h),j=b("FBStoriesBucketHelper").getId(h);e=b("fbStoriesRootSelectors").friendsBucketData(a);d=!1;f=e.reduce(function(a,c){b("FBStoriesBucketHelper").getId(c)===j?(d=!0,i&&a.push(h)):a.push(c);return a},[]);!d&&i&&(f=[h].concat(e));f=b("FBStoriesDataHelper").getFriendsDataWithEndedLiveBucket(f,b("fbStoriesRootSelectors").selectedBucket(a),b("fbStoriesStateSelectors").isOwnBucket(a,b("fbStoriesRootSelectors").selectedBucketId(a)));f.sort(b("friendsBucketSorter")(b("fbStoriesRootSelectors").userInfo(a).userID));return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:b("fbStoriesRootSelectors").userBucketData(a),userInfo:b("fbStoriesRootSelectors").userInfo(a),friendsBucketData:f})});case b("FBStoriesActionTypes").LOADED_ERROR:return babelHelpers["extends"]({},a,{data:b("LoadObject").withError(new Error(c.error.message))});case b("FBStoriesActionTypes").RESET_LOCAL_SEEN_HISTORY:return babelHelpers["extends"]({},a,{lastViewedThreadIndexForBucket:new Map()});case b("FBStoriesActionTypes").SELECTED_BUCKET_IDX_CHANGED:e=c.bucketIndex;return e<0||e>=this.getBucketCount()?a:babelHelpers["extends"]({},a,{selectedBucketIndex:e});case b("FBStoriesActionTypes").SELECTED_THREAD_IDX_CHANGED:f=this.getThreadCountForSelectedBucket();if(!this.isSelectedBucketLive()&&(c.index<0||c.index>=f))return a;e=new Map(a.lastViewedThreadIndexForBucket);e.set(this.getSelectedBucketIndex(),c.index);return babelHelpers["extends"]({},a,{lastViewedThreadIndexForBucket:e,currentThreadIndex:c.index});case b("FBStoriesActionTypes").SELECTED_THREAD_PERCENT_DONE:f=Math.min(100,Math.max(c.percentDone,0));return babelHelpers["extends"]({},a,{currentThreadPercentDone:f});case b("FBStoriesActionTypes").SET_ALL_BUCKETS_VIEWED:e=c.value;return e===a.allBucketsViewed?a:babelHelpers["extends"]({},a,{allBucketsViewed:e,unseenMode:a.unseenMode&&e?!1:a.unseenMode});case b("FBStoriesActionTypes").SET_UNSEEN_MODE:return babelHelpers["extends"]({},a,{unseenMode:c.value});case b("FBStoriesActionTypes").UPDATE_THREAD_SEEN_OPTIMISTIC:var k=this.getSelectedBucketId();f=function(a){__p&&__p();if(b("FBStoriesBucketHelper").getId(a)===k){var d=b("FBStoriesBucketHelper").getUnseenCount(a),e=this.$FBStoriesStore4(a).map(function(a){if(b("FBStoriesThreadHelper").getId(a)===c.threadID){b("FBStoriesThreadHelper").isSeenByViewer(a)||(d=Math.max(d-1,0));var e=babelHelpers["extends"]({},a);b("FBStoriesThreadHelper").setIsSeenByViewer(e,!0);return e}else return a}),f=babelHelpers["extends"]({},a);b("FBStoriesBucketHelper").setUnseenCount(f,d);b("FBStoriesBucketHelper").setThreads(f,e);return f}else return a}.bind(this);e=this.isOwnBucket()?f(this.getUserBucketData()):this.getUserBucketData();f=this.isOwnBucket()?this.getFriendsBucketData():this.getFriendsBucketData().map(f);return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:e,friendsBucketData:f,userInfo:this.getUserInfo()})});case b("FBStoriesActionTypes").UPDATE_THREAD_VIEWERS_SEEN_OPTIMISTIC:e=babelHelpers["extends"]({},this.getUserBucketData(),{threads:{nodes:this.$FBStoriesStore2().map(function(a){if(b("FBStoriesThreadHelper").getId(a)===c.threadID){var d=babelHelpers["extends"]({},a);b("FBStoriesThreadHelper").setSeenReceiptsLastSeenTime(d,Date.now());b("FBStoriesThreadHelper").setSeenReceiptsUnseenCount(d,0);b("FBStoriesThreadHelper").setSeenReceiptsFollowersUnseenCount(d,0);return d}else return a})}});return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:e,userInfo:this.getUserInfo(),friendsBucketData:this.getFriendsBucketData()})});case b("FBStoriesActionTypes").DELETE_THREAD_FROM_BUCKET:var l=c.threadID,m=c.bucketID;if(!this.isUserManagedThread(l,m))return a;f=this.getUserBucketData();e=null;m===b("FBStoriesBucketHelper").getId(f)?(b("FBStoriesBucketHelper").setThreads(f,this.$FBStoriesStore4(f).filter(function(a){return b("FBStoriesThreadHelper").getId(a)!==l})),e=this.getFriendsBucketData()):e=this.getFriendsBucketData().map(function(a){if(b("FBStoriesBucketHelper").getId(a)===m){var c=this.$FBStoriesStore4(a).filter(function(a){return b("FBStoriesThreadHelper").getId(a)!==l}),d=babelHelpers["extends"]({},a);b("FBStoriesBucketHelper").setThreads(d,c);return d}else return a}.bind(this)).filter(function(a){return this.$FBStoriesStore4(a).length>0}.bind(this));var n=a.lastViewedThreadIndexForBucket;l===this.getCurrentThreadIDForSelectedBucket()&&(n=new Map(n),n.set(this.getSelectedBucketIndex(),undefined));return babelHelpers["extends"]({},a,{lastViewedThreadIndexForBucket:n,data:b("LoadObject").withValue({userBucketData:f,friendsBucketData:e,userInfo:this.getUserInfo()})});case b("FBStoriesActionTypes").REMOVE_BUCKET:var o=c.bucketID;n=this.getFriendsBucketData().filter(function(a){return b("FBStoriesBucketHelper").getId(a)!==o});return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:this.getUserBucketData(),friendsBucketData:n,userInfo:this.getUserInfo()})});case b("FBStoriesLiveVideoActionTypes").LIVE_BUCKET_LOADED:f=c.data;e=b("FBStoriesDataHelper").getFriendsBucketDataFromLoadedObject(f);n=[].concat(this.getFriendsBucketData());f=e.reduce(function(a,c){this.$FBStoriesStore3(c)&&this.getBucketIndexByBucketId(b("FBStoriesBucketHelper").getId(c))===-1&&a.push(c);return a}.bind(this),n);return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:this.getUserBucketData(),userInfo:this.getUserInfo(),friendsBucketData:f})});case b("FBStoriesActionTypes").REMOVE_ENDED_LIVE_VIDEO_FROM_BUCKET:var p=c.bucketID;e=this.getFriendsBucketData().map(function(a){b("FBStoriesBucketHelper").getId(a)===p&&(b("FBStoriesBucketHelper").setLiveVideo(a,null),b("FBStoriesBucketHelper").setHasLiveVideoEnded(a,!1));return a});return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:this.getUserBucketData(),friendsBucketData:e,userInfo:this.getUserInfo()})});case b("FBStoriesActionTypes").SET_IS_COMMERCIAL_BREAK_RUNNING:n=new Map(this.getState().isCommercialBreakRunning);return babelHelpers["extends"]({},a,{isCommercialBreakRunning:n.set(c.videoID,c.isCommercialBreakRunning)});case b("FBStoriesActionTypes").UNSELECT_BUCKET:return babelHelpers["extends"]({},a,{selectedBucketIndex:-1,currentThreadIndex:-1});case b("FBStoriesActionTypes").SET_VIEWER_OPEN:return babelHelpers["extends"]({},a,{isViewerOpen:c.value,viewerEntrypoint:c.entrypoint});case b("FBStoriesActionTypes").SET_USER_BUCKET_UPLOAD_STATUS:f=babelHelpers["extends"]({},this.getUserBucketData());b("FBStoriesBucketHelper").setUploading(f,c.isUploading);return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:f,friendsBucketData:this.getFriendsBucketData(),userInfo:this.getUserInfo()})});case b("FBStoriesActionTypes").OPTIMISTIC_CREATE_PHOTO_STORY:e=b("FBStoriesThreadHelper").makeOptimisticPhotoThread(c.imageURL);n=babelHelpers["extends"]({},this.getUserBucketData());b("FBStoriesBucketHelper").addThreadToBucket(n,e);return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:n,friendsBucketData:this.getFriendsBucketData(),userInfo:this.getUserInfo()})});case b("FBStoriesActionTypes").RESET_STATE:return babelHelpers["extends"]({},this.getInitialState());case b("FBStoriesActionTypes").SET_SUBSCRIPTION_TOKEN:return babelHelpers["extends"]({},a,{subscriptionToken:c.token});case b("FBStoriesActionTypes").OPTIMISTIC_POLL_VOTE:var q=c.index,r=this.getSelectedBucketId();f=function(a){__p&&__p();if(b("FBStoriesBucketHelper").getId(a)===r){var c=this.$FBStoriesStore4(a).map(function(a){__p&&__p();if(b("FBStoriesThreadHelper").getId(a)===this.getCurrentThreadIDForSelectedBucket()){var c,d=babelHelpers["extends"]({},a);(((c=d)!=null?(c=c.root_message)!=null?c.story_overlays:c:c)||[]).map(function(a){if(a.__typename==="StoryOverlayPollSticker"){var b=a.poll,c=babelHelpers["extends"]({},b);c.viewer_vote_index=q;c.poll_options=[].concat(b.poll_options);b=c.poll_options[q];b!==undefined&&(b.vote_count+=1);a.poll=c}return a});return d}else return a}.bind(this)),d=babelHelpers["extends"]({},a);b("FBStoriesBucketHelper").setThreads(d,c);return d}else return a}.bind(this);e=this.isOwnBucket()?f(this.getUserBucketData()):this.getUserBucketData();n=this.isOwnBucket()?this.getFriendsBucketData():this.getFriendsBucketData().map(f);return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:e,friendsBucketData:n,userInfo:this.getUserInfo()})});case b("FBStoriesActionTypes").SET_IS_PRODUCTION_DIALOG_LOADING:return babelHelpers["extends"]({},a,{isProductionDialogLoading:c.value});case b("FBStoriesActionTypes").APPROVE_PENDING_THREAD:var s=c.bucketID,t=c.threadID;f=this.getFriendsBucketData().map(function(a){__p&&__p();if(b("FBStoriesBucketHelper").getId(a)===s){var c=b("FBStoriesBucketHelper").getPendingThreads(a),d=c.findIndex(function(a){return b("FBStoriesThreadHelper").getId(a)===t});if(d===-1)return a;var e=c[d];c.splice(d,1);b("FBStoriesBucketHelper").setPendingThreads(a,c);d=b("FBStoriesThreadHelper").getTime(e);c=this.$FBStoriesStore4(a);var f=0;if(c.length===0)c.push(e);else for(f=c.length-1;f>=0;f--){var g=b("FBStoriesThreadHelper").getTime(c[f]);if(d>g){c.splice(f+1,0,e);break}else f===0&&c.splice(0,0,e)}b("FBStoriesBucketHelper").setThreads(a,c);g=babelHelpers["extends"]({},a);return g}return a}.bind(this));return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:this.getUserBucketData(),friendsBucketData:f,userInfo:this.getUserInfo()})});default:return a}};a.prototype.$FBStoriesStore5=function(){var a=this.getState().data;return a.hasValue()?a.getValueEnforcing():{friendsBucketData:[],userBucketData:b("FBStoriesBucketHelper").getDefaultBucket(),userInfo:{userName:"",userID:"",userGender:"",userProfilePic:{uri:""}}}};a.prototype.getUserBucketData=function(){return this.$FBStoriesStore5().userBucketData||{}};a.prototype.getUserInfo=function(){return this.$FBStoriesStore5().userInfo||{}};a.prototype.getFriendsBucketData=function(){return this.$FBStoriesStore5().friendsBucketData||[]};a.prototype.isMutedBucketOwner=function(a){var c=b("FBStoriesMutedBucketOwnersStore").getState();c=b("fbStoriesMutedBucketOwnersSelectors").getMutedBucketOwners(c);return c.find(function(b){return b.id===a})!==undefined};a.prototype.isLoading=function(){return this.getState().data.isLoading()};a.prototype.getBucketIds=function(){var a=this.getFriendsBucketData().map(function(a){return a.id?a.id:""}),b=this.getUserBucketData().id||"";return[b].concat(a)};a.prototype.getSelectedBucketIndex=function(){return this.getState().selectedBucketIndex};a.prototype.getSelectedBucketId=function(){return this.getBucketIds()[this.getSelectedBucketIndex()]};a.prototype.areAllBucketsViewed=function(){return this.getState().allBucketsViewed};a.prototype.getCameraPostTypeForBucketId=function(a){return b("FBStoriesBucketHelper").getCameraPostType(this.$FBStoriesStore6(a))};a.prototype.doesBucketContainThreadId=function(a,c){a=this.$FBStoriesStore6(a);a=b("FBStoriesBucketHelper").getThreads(a);return a.find(function(a){return b("FBStoriesThreadHelper").getId(a)===c})!==undefined};a.prototype.$FBStoriesStore6=function(a){return this.getBucketByIndex(this.getBucketIndexByBucketId(a))};a.prototype.getBucketIndexByBucketId=function(a){return this.getBucketIds().indexOf(a)};a.prototype.getSelectedBucketCameraPostType=function(){return b("FBStoriesBucketHelper").getCameraPostType(this.$FBStoriesStore1())};a.prototype.getSelectedBucketOwner=function(){return b("FBStoriesBucketHelper").getOwner(this.$FBStoriesStore1())};a.prototype.getSelectedBucketOwnerID=function(){return b("FBStoriesBucketHelper").getOwnerId(this.$FBStoriesStore1())};a.prototype.getSelectedBucketUnseenCount=function(){return b("FBStoriesBucketHelper").getUnseenCount(this.$FBStoriesStore1())};a.prototype.getThreadsForSelectedBucket=function(){return this.$FBStoriesStore4(this.$FBStoriesStore1())};a.prototype.getCurrentThreadIndexForSelectedBucket=function(){return this.getState().currentThreadIndex};a.prototype.getCurrentThreadIDForSelectedBucket=function(){return b("FBStoriesThreadHelper").getId(this.getCurrentThreadForSelectedBucket())};a.prototype.getCurrentThreadStatusForSelectedBucket=function(){return b("FBStoriesThreadHelper").getStatus(this.getCurrentThreadForSelectedBucket())};a.prototype.getCurrentThreadCameraPostTypeForSelectedBucket=function(){return this.isSelectedBucketLive()?b("CameraPostTypes").STORY:b("FBStoriesThreadHelper").getCameraPostType(this.getCurrentThreadForSelectedBucket())};a.prototype.getCurrentThreadMediaTypeForSelectedBucket=function(){return this.isSelectedBucketLive()?b("BackstageMediaType").LIVE:b("FBStoriesThreadHelper").getMediaType(this.getCurrentThreadForSelectedBucket())};a.prototype.getFeedTrackingData=function(a){__p&&__p();var b={};b.is_fb_story=!0;b.media_id=this.getCurrentThreadMediaIDForSelectedBucket();b.camera_post_type=this.getSelectedBucketCameraPostType();b.story_owner_fbid=this.getSelectedBucketOwnerID();b.story_owner_type=this.getSelectedBucketOwnerType();b.story_size=this.getThreadCountForSelectedBucket();b.new_content_size=this.getSelectedBucketUnseenCount();b.bucket_index=this.getSelectedBucketIndex();b.event=a;b.bucket_ids=this.getBucketIds();a=this.getUserBucketData();a&&(b.bucket_data=a);a=this.getCurrentThreadData();a&&(b.thread_data=a);return b};a.prototype.getCurrentThreadMediaIDForSelectedBucket=function(){if(this.isSelectedBucketLive()){var a=this.getThreadDataForSelectedLiveBucket();return a&&a.media.id}return b("FBStoriesThreadHelper").getMediaId(this.getCurrentThreadForSelectedBucket())};a.prototype.getCurrentThreadMediaViewerCountForSelectedBucket=function(){var a=this.getCurrentThreadForSelectedBucket();return b("FBStoriesThreadHelper").getNonFriendsSeenCount(a)+b("FBStoriesThreadHelper").getFriendsSeenCount(a)};a.prototype.getCurrentThreadForSelectedBucket=function(){return this.getThreadsForSelectedBucket()[this.getCurrentThreadIndexForSelectedBucket()]};a.prototype.getCurrentThreadData=function(){return this.isSelectedBucketLive()?this.getThreadDataForSelectedLiveBucket():this.$FBStoriesStore7(this.getState().currentThreadIndex)};a.prototype.shouldDisableReply=function(){var a=b("FBStoriesBucketHelper").shouldEnablePageStoryReply(this.$FBStoriesStore1());if(a==!0)return!1;a=this.isOwnThread();var c=b("FBStoriesBucketHelper").isViewerFriendOfOwner(this.$FBStoriesStore1()),d=b("FBStoriesThreadHelper").isViewerFriendOfOwner(this.getCurrentThreadForSelectedBucket());return a||!c&&!d||this.isSelectedBucketLive()};a.prototype.getNonFriendsSeenCount=function(){return b("FBStoriesThreadHelper").getNonFriendsSeenCount(this.getCurrentThreadForSelectedBucket())};a.prototype.getFriendsSeenCount=function(){return b("FBStoriesThreadHelper").getFriendsSeenCount(this.getCurrentThreadForSelectedBucket())};a.prototype.isOwnBucket=function(a){return(a!=undefined?a:this.getSelectedBucketId())===b("FBStoriesBucketHelper").getId(this.getUserBucketData())};a.prototype.isOwnThread=function(){if(this.isOwnBucket())return!0;var a=this.getCurrentThreadForSelectedBucket();a=b("FBStoriesThreadHelper").getOwnerId(a);return a===this.getUserInfo().userID};a.prototype.isBucketViewerEventHost=function(){var a=this.$FBStoriesStore1();return b("FBStoriesBucketHelper").isViewerEventHost(a)};a.prototype.isCurrentThreadUserManaged=function(){return this.isUserManagedThread(this.getCurrentThreadIDForSelectedBucket()||"",this.getSelectedBucketId())};a.prototype.canUserReportCurrentThreadToFacebook=function(){return this.canUserReportThreadToFacebook(this.getCurrentThreadIDForSelectedBucket()||"",this.getSelectedBucketId())};a.prototype.isCurrentBucketUserManaged=function(){return this.isUserManagedBucket(this.getSelectedBucketId())};a.prototype.isUserManagedThread=function(a,c){var d=this.$FBStoriesStore6(c);if(!d)return!1;a=this.$FBStoriesStore8(a,d);d=b("FBStoriesThreadHelper").getOwnerId(a);return a&&d===this.getUserInfo().userID||this.isUserManagedBucket(c)};a.prototype.canUserReportThreadToFacebook=function(a,c){c=this.$FBStoriesStore6(c);if(!c)return!1;a=this.$FBStoriesStore8(a,c);return a===null?!1:b("FBStoriesThreadHelper").getOwnerId(a)!==this.getUserInfo().userID&&!b("FBStoriesBucketHelper").isViewerEventHost(c)&&!b("FBStoriesBucketHelper").isViewerPageContentAdmin(c)};a.prototype.isUserManagedBucket=function(a){a=this.$FBStoriesStore6(a);return!a?!1:b("FBStoriesBucketHelper").getId(a)===b("FBStoriesBucketHelper").getId(this.getUserBucketData())||b("FBStoriesBucketHelper").isViewerEventHost(a)||b("FBStoriesBucketHelper").isViewerPageContentAdmin(a)||b("FBStoriesBucketHelper").isViewerGroupModerator(a)||b("FBStoriesBucketHelper").isViewerGroupAdmin(a)};a.prototype.canSeeCurrentThreadViewCount=function(){return this.isOwnThread()&&!this.isSelectedBucketLive()||this.isCurrentBucketPageAdmin()};a.prototype.canOpenCurrentThreadViewerSheet=function(){return this.isOwnThread()&&!this.isSelectedBucketLive()};a.prototype.isCurrentBucketGroupAdmin=function(){return this.isGroupAdminBucket(this.getSelectedBucketId())};a.prototype.isCurrentBucketPageAdmin=function(){return this.isPageAdminBucket(this.getSelectedBucketId())};a.prototype.isGroupAdminBucket=function(a){a=this.$FBStoriesStore6(a);return!a?!1:b("FBStoriesBucketHelper").isViewerGroupModerator(a)||b("FBStoriesBucketHelper").isViewerGroupAdmin(a)};a.prototype.isPageAdminBucket=function(a){a=this.$FBStoriesStore6(a);return!a?!1:b("FBStoriesBucketHelper").isViewerPageContentAdmin(a)};a.prototype.isCurrentThreadReviewStatusPending=function(){var a=this.getThreadsForSelectedBucket()[this.getCurrentThreadIndexForSelectedBucket()];return b("FBStoriesThreadHelper").isReviewStatusPending(a)};a.prototype.getBucketCount=function(){return this.getFriendsBucketData().length+1};a.prototype.hasDataInSelectedBucket=function(){return b("FBStoriesBucketHelper").hasData(this.$FBStoriesStore1())};a.prototype.hasOwnBucketViewers=function(){return this.userBucketIsLive()?!1:b("FBStoriesBucketHelper").hasNewViewers(this.getUserBucketData())};a.prototype.hasOwnBucketUpdates=function(){return this.userBucketIsLive()?!1:b("FBStoriesBucketHelper").hasUnseenThreads(this.getUserBucketData())};a.prototype.hasOwnBucketContent=function(){return this.$FBStoriesStore2().length>0||this.userBucketIsLive()};a.prototype.getCurrentThreadPercentDone=function(){return this.getState().currentThreadPercentDone};a.prototype.getThreadCountForSelectedBucket=function(){return this.getThreadsForSelectedBucket().length};a.prototype.userBucketIsLive=function(){return this.$FBStoriesStore3(this.getUserBucketData())};a.prototype.isSelectedBucketLive=function(){return this.$FBStoriesStore3(this.$FBStoriesStore1())};a.prototype.getSelectedBucketOwnerType=function(){return b("FBStoriesBucketHelper").getLoggingType(this.$FBStoriesStore1())};a.prototype.$FBStoriesStore3=function(a){return b("FBStoriesBucketHelper").isLive(a)};a.prototype.getCurrentThreadViewers=function(){__p&&__p();var a={hasNewViewers:!1,hasNewFriendViewers:!1,hasNewConnectionsViewers:!1,friends:[],connections:[],totalCount:0,totalNew:0,nonFriendsCount:0};if(!this.canSeeCurrentThreadViewCount())return a;var c=this.getCurrentThreadForSelectedBucket(),d=b("FBStoriesThreadHelper").getViewers(c),e=this.getUserInfo().userID,f=b("FBStoriesThreadHelper").getPollVoters(c);a=d.reduce(function(a,d){__p&&__p();var g=b("FBStoriesThreadHelper").getStoryViewerId(d);if(!g)return a;if(g!==e){var h;h=((h=d)!=null?(h=h.node)!=null?h.is_viewer_friend:h:h)||!1;var i=h?"friends":"connections",j=b("FBStoriesThreadHelper").getStoryViewerSeenTime(d),k=b("FBStoriesThreadHelper").getStoryViewerReactions(d),l=j>=b("FBStoriesThreadHelper").getSeenReceiptsLastSeenTime(c);a[i].push(babelHelpers["extends"]({},d.node,{seenTime:j,isNewViewer:l,reactions:k,votedPollOptionIndex:f[g]}));a.totalNew+=l?1:0;a.hasNewViewers=a.hasNewViewers||l;a.hasNewFriendViewers=a.hasNewFriendViewers||l&&h;a.hasNewConnectionsViewers=a.hasNewViewers||l&&!h}return a},a);var g=this.getNonFriendsSeenCount();return Object.assign(a,{totalCount:g+d.length,nonFriendsCount:g})};a.prototype.isUnseenMode=function(){return this.getState().unseenMode};a.prototype.getThreadCount=function(a){__p&&__p();var b=this.getBucketByIndex(a);if(this.$FBStoriesStore3(b))return 0;if(a===0){var c=this.$FBStoriesStore4(this.getUserBucketData());return c.length}if(a>0){c=this.$FBStoriesStore4(b);return c.length}return-1};a.prototype.getUnseenThreadIndex=function(a){return b("FBStoriesBucketHelper").getUnseenThreadIndex(this.getBucketByIndex(a))};a.prototype.getAllowedNavigationType=function(){var a=this.getSelectedBucketIndex(),c=a===0||a==1&&!b("FBStoriesBucketHelper").hasData(this.getUserBucketData());a=a===this.getBucketCount()-1;c=c&&this.getCurrentThreadIndexForSelectedBucket()==0;a=a&&this.getCurrentThreadIndexForSelectedBucket()===this.getThreadsForSelectedBucket().length-1;if(c)return"NEXT_ONLY";return a?"PREV_ONLY":"BOTH"};a.prototype.hasSeenBucketInCurrentSession=function(a){var b=this.getState().lastViewedThreadIndexForBucket;return b.get(a)!==undefined};a.prototype.getLastSeenThreadIndexForBucket=function(a){var b=this.getState().lastViewedThreadIndexForBucket;b=b.get(a);return b==undefined?0:b};a.prototype.$FBStoriesStore2=function(){return this.$FBStoriesStore4(this.getUserBucketData())};a.prototype.$FBStoriesStore1=function(){return this.getBucketByIndex(this.getSelectedBucketIndex())};a.prototype.getBucketByIndex=function(a){var b;return a===0?this.getUserBucketData():(b=this.getFriendsBucketData())!=null?b[a-1]:b};a.prototype.$FBStoriesStore8=function(a,b){b=this.$FBStoriesStore4(b);b=b.filter(function(b){return b.id===a});return b.length>0?b[0]:null};a.prototype.$FBStoriesStore4=function(a){return b("FBStoriesBucketHelper").getThreads(a)};a.prototype.$FBStoriesStore7=function(a){var c=this.getSelectedBucketOwner();a=this.getThreadsForSelectedBucket()[a];if(!a)return null;var d=b("FBStoriesThreadHelper").getMedia(a),e=b("FBStoriesThreadHelper").getWWWTextFormatMetadata(a),f=b("FBStoriesThreadHelper").getTextFormatMetadata(a),g=b("FBStoriesThreadHelper").getBackdropImage(a),h=b("FBStoriesThreadHelper").getMessageText(a),i=b("FBStoriesThreadHelper").getDelightRanges(a),j=b("FBStoriesThreadHelper").getIsPlainText(a),k=b("FBStoriesThreadHelper").getInstagramProfileURL(a),l=b("FBStoriesThreadHelper").getOriginalPostStoryAttribution(a);return{isLive:!1,media:d,bucketOwner:c,threadOwner:b("FBStoriesThreadHelper").getOwner(a)||{name:null,id:null,is_viewer_friend:!1,profile_picture:null},participants:[],isSeen:b("FBStoriesThreadHelper").isSeenByViewer(a),latestMessageID:b("FBStoriesThreadHelper").getLatestMessageID(a),time:b("FBStoriesThreadHelper").getTime(a),threadID:b("FBStoriesThreadHelper").getId(a),cameraPostType:b("FBStoriesThreadHelper").getCameraPostType(a),cameraPostSource:b("FBStoriesThreadHelper").getCameraPostSource(a),wwwTextFormatMetadata:e,messageText:h,delightRanges:i,textFormatMetadata:f,backdropImage:g,instagramProfileURL:k,isPlainText:j,originalPostStoryAttribution:l,activityDescription:b("FBStoriesThreadHelper").getActivityDescription(a),withTags:b("FBStoriesThreadHelper").getWithTags(a),explicitLocation:b("FBStoriesThreadHelper").getExplicitLocation(a),inlineActivities:b("FBStoriesThreadHelper").getInlineActivities(a),defaultBackground:b("FBStoriesThreadHelper").getDefaultBackground(a),linkAttachment:b("FBStoriesThreadHelper").getLinkAttachment(a),mediaBackground:b("FBStoriesThreadHelper").getMediaBackground(a),negativeFeedbackActions:b("FBStoriesThreadHelper").getNegativeFeedbackActions(a)}};a.prototype.getThreadDataForSelectedLiveBucket=function(){var a=this.$FBStoriesStore1();return this.$FBStoriesStore9(a)};a.prototype.$FBStoriesStore9=function(a){if(!a)return null;var c=b("FBStoriesBucketHelper").getLiveVideo(a);if(!c||!this.$FBStoriesStore3(a))return null;var d=this.getSelectedBucketOwner();return{isLive:!0,media:c,bucketOwner:d,isSeen:!1,cameraPostType:b("FBStoriesBucketHelper").getCameraPostType(a)}};a.prototype.isSelectedBucketLiveAndEnded=function(){return this.isSelectedBucketLive()&&b("FBStoriesBucketHelper").hasLiveVideoEnded(this.$FBStoriesStore1())};a.prototype.getIsCommercialBreakRunning=function(a){return!!this.getState().isCommercialBreakRunning.get(a)};a.prototype.getVideoMediaIdForBucketIndexAndThreadIndex=function(a,c){__p&&__p();a=this.getBucketByIndex(a);if(!a)return null;if(this.$FBStoriesStore3(a)){var d=this.$FBStoriesStore9(a);return(d=d)!=null?(d=d.media)!=null?d.id:d:d}d=this.$FBStoriesStore4(a);if(c<0||c>=d.length)return null;a=b("FBStoriesThreadHelper").getMedia(d[c]);if(!a)return null;return!b("CameraPostMediaHelper").isVideo(a)?null:a.id};a.prototype.isViewerOpen=function(){return this.getState().isViewerOpen};a.prototype.getCurrentViewerEntrypoint=function(){return this.getState().viewerEntrypoint};a.prototype.getCurrentThreadOverlays=function(){return b("FBStoriesThreadHelper").getStoryOverlays(this.getCurrentThreadForSelectedBucket())};a.prototype.isProductionDialogLoading=function(){return this.getState().isProductionDialogLoading};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("FBStoriesDispatcher"))}),null);
__d("FBStoriesMutedBucketOwnersActions",["CurrentUser","FBLogger","FBStoriesDataHelper","FBStoriesDispatcher","FBStoriesGraphQLAPI","FBStoriesMutedBucketOwnersActionTypes","FBStoriesMutedBucketOwnersStore","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBStoriesDispatcher").dispatch;function a(){b("FBStoriesDispatcher").explicitlyRegisterStores([b("FBStoriesMutedBucketOwnersStore")])}a.prototype.loadMutedOwners=function(){g({type:b("FBStoriesMutedBucketOwnersActionTypes").LOADING}),b("promiseDone")(b("FBStoriesGraphQLAPI").loadMutedBucketOwnersList(),function(a){g({type:b("FBStoriesMutedBucketOwnersActionTypes").LOADED,data:b("FBStoriesDataHelper").getMutedBucketOwnersFromLoadedQuery(a)})},function(){b("FBLogger")("fbstories").mustfix("failed to load muted bucket owners for: %s",b("CurrentUser").getID())})};a.prototype.setBucketOwnerMuted=function(a,c,d,e){b("promiseDone")(b("FBStoriesGraphQLAPI").muteBucketOwner(b("CurrentUser").getID(),a,e),function(){g({type:b("FBStoriesMutedBucketOwnersActionTypes").SET_IS_CURRENTLY_MUTING,ownerID:a,value:!1})},function(){b("FBLogger")("fbstories").mustfix("failed to mute bucket with owner id: %s",a)}),g({type:b("FBStoriesMutedBucketOwnersActionTypes").SET_IS_CURRENTLY_MUTING,ownerID:a,value:!0}),g({type:b("FBStoriesMutedBucketOwnersActionTypes").UPDATE_MUTED_OPTIMISTIC,ownerID:a,ownerName:c,ownerProfilePictureUri:d,value:e})};e.exports=new a()}),null);
__d("FBStoriesActionsHelper",["FBStoriesStore","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={},h=function(a,c){__p&&__p();var d=c?a+1:a-1,e=0,f=b("FBStoriesStore").getLastSeenThreadIndexForBucket(a),h=b("FBStoriesStore").hasSeenBucketInCurrentSession(a),j=g[a];if(!j)j={prev:null,next:null,curThreadIdx:f},g[a]=j;else{h&&(j.curThreadIdx=f);h=j.next!=null?g[j.next]:null;f=j.prev!=null?g[j.prev]:null;if(c&&h!=null&&h.curThreadIdx!=null){h.prev=a;return{nextBucketIndex:b("nullthrows")(j.next),nextThreadIndex:h.curThreadIdx}}else if(!c&&f!=null&&f.curThreadIdx!=null){f.next=a;return{nextBucketIndex:b("nullthrows")(j.prev),nextThreadIndex:f.curThreadIdx}}}h=!1;while(h===!1&&!i.checkAllBucketsViewed(d))e=b("FBStoriesStore").getUnseenThreadIndex(d),h=e>=0,h||(d=c?d+1:d-1);if(h){c?b("nullthrows")(j).next=d:b("nullthrows")(j).prev=d;f=g[d];f||(g[d]={prev:null,next:null,curThreadIdx:e},f=g[d]);c?b("nullthrows")(f).prev=a:b("nullthrows")(f).next=a}return{nextBucketIndex:d,nextThreadIndex:e}},i={checkAllBucketsViewed:function(a){var c=b("FBStoriesStore").getBucketCount();return a>=c||a<0},resetNavMap:function(){g={}},getNextBucketAndThreadIndex:function(a,c){var d=c?a+1:a-1,e=0;if(b("FBStoriesStore").isUnseenMode()){a=h(a,c);d=a.nextBucketIndex;e=a.nextThreadIndex}else c||(e=b("FBStoriesStore").getLastSeenThreadIndexForBucket(d));return{nextBucketIndex:d,nextThreadIndex:e}}};e.exports=i}),null);
__d("FBStoriesDataHelper",["CameraPostTypesHelper","CurrentUser","FBLogger","FBStoriesActions","FBStoriesActionTypes","FBStoriesBucketHelper","FBStoriesDispatcher","FBStoriesGraphQLAPI","dotAccess","friendsBucketSorter","gkx","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getBucketsDataFromLoadedObject:function(a){__p&&__p();var c=g.getUserDataNodesFromLoadedObject(a);c=c[0];var d=g.getUserInfoFromLoadedObject(a);a=g.getFriendsBucketDataFromLoadedObject(a);a=a.reduce(function(a,c){__p&&__p();var d=b("FBStoriesBucketHelper").getThreads(c);d=d&&d.length>0;var e=b("FBStoriesBucketHelper").getCameraPostType(c),f=b("CameraPostTypesHelper").isStoryNux(e),g=b("CameraPostTypesHelper").isStory(e),h=b("CameraPostTypesHelper").isEventStory(e),i=b("CameraPostTypesHelper").isPageStory(e);e=b("CameraPostTypesHelper").isGroupStory(e);var j=b("gkx")("AT7HjiDwnMVL3AIA8BSudVOFxA-IzyrieUd8NdxFJOoIjXI3kpzXujbNr99ZiCMNBY0PFFBmtxsMTVC_JOHwUWMQ_JsNoMIejCjR_HtHsnVnTA");if(j&&b("FBStoriesBucketHelper").isOwnerEmployee(c))return a;if(f)return a;if(!d)return b("FBStoriesBucketHelper").isLive(c)?a.concat([c]):a;return g||i||h||e?a.concat([c]):a},[]);a.sort(b("friendsBucketSorter")(d.userID));return{userInfo:d,userBucketData:c,friendsBucketData:a}},hasData:function(a){return!a?!1:g.getFriendsBucketDataFromLoadedObject(a).length>0&&g.getUserDataNodesFromLoadedObject(a).length>0},getFriendsBucketDataFromLoadedObject:function(a){return((a=a)!=null?(a=a.me)!=null?(a=a.friends_stories_buckets)!=null?a.nodes:a:a:a)||[]},getUserDataNodesFromLoadedObject:function(a){return((a=a)!=null?(a=a.me)!=null?(a=a.story_bucket)!=null?a.nodes:a:a:a)||[]},getUserInfoFromLoadedObject:function(a){var b;return{userName:(b=a)!=null?(b=b.me)!=null?b.name:b:b,userID:(b=a)!=null?(b=b.me)!=null?b.id:b:b,userGender:(b=a)!=null?(b=b.me)!=null?b.gender:b:b,userProfilePic:(b=a)!=null?(b=b.me)!=null?b.profile_picture:b:b}},getFriendsDataWithEndedLiveBucket:function(a,c,d){__p&&__p();if(!c||d||!b("FBStoriesBucketHelper").isLive(c))return a;var e=b("FBStoriesBucketHelper").getId(c);d=!1;a=a.reduce(function(a,f){if(b("FBStoriesBucketHelper").getId(f)===e){d=!0;var g=!b("FBStoriesBucketHelper").isLive(f);c&&g&&(b("FBStoriesBucketHelper").setLiveVideo(f,c.live_video),b("FBStoriesBucketHelper").setHasLiveVideoEnded(f,!0))}a.push(f);return a},[]);d||(b("FBStoriesBucketHelper").setHasLiveVideoEnded(c,!0),a=[c].concat(a));return a},getMutedBucketOwnersFromLoadedQuery:function(a){a=((a=a)!=null?(a=a.me)!=null?(a=a.unfollowees_for_camera_post_story)!=null?a.edges:a:a:a)||[];return a.map(function(a){var b,c,d;a=a.node;d=(d=a)!=null?d.id:d;c=(c=a)!=null?c.name:c;b=(b=a)!=null?(b=b.profile_picture)!=null?b.uri:b:b;a=(a=a)!=null?(a=a.cover_photo)!=null?(a=a.photo)!=null?(a=a.image)!=null?a.uri:a:a:a:a;return{id:d,name:c,profilePictureUri:a?a:b,muted:!0}})},loadData:function(a){b("promiseDone")(b("FBStoriesGraphQLAPI").load(),function(a){a=g.getBucketsDataFromLoadedObject(a);b("FBStoriesDispatcher").dispatch({type:b("FBStoriesActionTypes").LOADED,data:a})},a?a:function(a){a=a.errors;a.length>0&&a[0].message&&b("FBLogger")("fbstories").mustfix("Error loading user tray data, err msg: %s",a[0].message)})},loadPageBucketData:function(a,c){b("promiseDone")(b("FBStoriesGraphQLAPI").loadPageBucketStoryData(a),function(a){a=b("dotAccess")(a,"node.page_story_bucket.nodes");(a||a.length>0)&&(b("FBStoriesActions").resetStore(),b("FBStoriesActions").loadData(b("CurrentUser").getName(),b("CurrentUser").getID(),null,null,[babelHelpers["extends"]({},a[0])]))},c?c:function(c){c=c.errors;c.length>0&&c[0].message&&b("FBLogger")("fbstories").mustfix("Error loading page story data, page id: %s, err msg: %s",a,c[0].message)})}};e.exports=g}),null);
__d("FBStoriesWWWPerfTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:FBStoriesWWWPerfLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:FBStoriesWWWPerfLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:FBStoriesWWWPerfLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setEventTotalTime=function(a){this.$1.event_total_time=a;return this};a.prototype.setEventType=function(a){this.$1.event_type=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={event_total_time:!0,event_type:!0,vc:!0};e.exports=a}),null);
__d("FBStoriesLoggingHelper",["BackstageMediaType","Banzai","DirectMessagingTypedLogger","FBLogger","FBStoriesBucketHelper","FBStoriesLoggingConstants","FBStoriesStore","FBStoriesWWWPerfTypedLogger","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={_traySessionID:null,_viewerSessionID:null,_eventStartTimes:{},logStoryTrayLoad:function(a){__p&&__p();this._traySessionID=b("uuid")();var c=a.userBucketData;a=a.friendsBucketData;var d=b("FBStoriesBucketHelper").hasData(c),e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=new Map();b("FBStoriesBucketHelper").isLive(c)&&g++;a.forEach(function(a){__p&&__p();e++;b("FBStoriesBucketHelper").getUnseenCount(a)>0&&f++;b("FBStoriesBucketHelper").isLive(a)&&g++;var c=b("FBStoriesBucketHelper").getLoggingType(a);switch(c){case b("FBStoriesLoggingConstants").PAGE_STORY:h++;break;case b("FBStoriesLoggingConstants").EVENT_STORY:i++;break;case b("FBStoriesLoggingConstants").GROUP_STORY:j++;break;case b("FBStoriesLoggingConstants").STORY_PROMOTION:k++;break;case b("FBStoriesLoggingConstants").FOLLOWEE_STORY:l++;break;case b("FBStoriesLoggingConstants").FRIEND_STORY:m++;break;default:b("FBLogger")("fbstories").mustfix("storyOwnerType not found: %s",c)}c=b("FBStoriesBucketHelper").getOwnerId(a);var d=b("FBStoriesBucketHelper").getThreadIDs(a);if(b("FBStoriesBucketHelper").isLive(a)){a=(a=b("FBStoriesBucketHelper").getLiveVideo(a))!=null?a.id:a;a&&d.push(a)}n.set(c,d)});this._getLogger().setName(b("FBStoriesLoggingConstants").ACTION_TRAY_LOAD).setHasMyStory(d).setNumberStories(e).setNumberNewStories(f).setNumberLiveStories(g).setLiveStoriesInTray(g).setPageStoriesInTray(h).setGroupStoriesInTray(j).setEventStoriesInTray(i).setFolloweeStoriesInTray(l).setFriendStoriesInTray(m).setPromotionStoriesInTray(k).setStoryThreadIds(n).setTraySessionID(this._traySessionID).log()},storyLog:function(a,c){a===b("FBStoriesLoggingConstants").ACTION_OPEN_STORY&&!this._viewerSessionID&&(this._viewerSessionID=b("uuid")());var d=b("FBStoriesStore").getSelectedBucketCameraPostType(),e=b("FBStoriesStore").getSelectedBucketOwnerID(),f=b("FBStoriesStore").getSelectedBucketOwnerType(),g=b("FBStoriesStore").getThreadCountForSelectedBucket(),h=b("FBStoriesStore").getSelectedBucketUnseenCount()>0,i=b("FBStoriesStore").getSelectedBucketIndex();d=this._getLogger().setCameraPostType(d).setName(a).setActionSource(c).setStoryOwner(e).setStoryOwnerType(f).setThreadCount(g).setHasNewContent(h).setStoryIndex(i).setTraySessionID(this._traySessionID).setClientViewerSessionID(this._viewerSessionID);d.log();b("Banzai").post("stories_interaction_poseidon_logging_banzai",{name:a,source:c,story_owner:String(e),number_media:String(g)})},storyInsightsLog:function(a){b("Banzai").post("fb_stories_insights_logging_banzai",a.getData())},getMediaLogger:function(a){var c=b("FBStoriesStore").getCurrentThreadCameraPostTypeForSelectedBucket(),d=b("FBStoriesStore").getSelectedBucketOwnerID(),e=b("FBStoriesStore").getSelectedBucketOwnerType(),f=b("FBStoriesStore").getCurrentThreadMediaIDForSelectedBucket(),g=b("FBStoriesStore").getCurrentThreadMediaTypeForSelectedBucket(),h=b("FBStoriesStore").getCurrentThreadMediaViewerCountForSelectedBucket(),i=b("FBStoriesStore").getSelectedBucketIndex(),j=b("FBStoriesStore").getCurrentThreadIDForSelectedBucket(),k=b("BackstageMediaType").UNKNOWN;g==="Photo"?k=b("BackstageMediaType").PHOTO:g==="Video"?k=b("BackstageMediaType").VIDEO:g===b("BackstageMediaType").LIVE&&(k=b("BackstageMediaType").LIVE);g="";j&&(g=j.toString());return this._getLogger().setCameraPostType(c).setName(a).setStoryOwner(d).setStoryOwnerType(e).setMediaType(k).setClientMediaID(f).setNumberViewers(h).setCardID(g).setStoryIndex(i).setTraySessionID(this._traySessionID).setClientViewerSessionID(this._viewerSessionID)},mediaLog:function(a){this.getMediaLogger(a).log()},logEventStart:function(a){if(Object.prototype.hasOwnProperty.call(this._eventStartTimes,a)){!1;return}this._eventStartTimes[a]=Date.now();this._getPerfLogger().setEventType(a).setEventTotalTime(0).log()},logEventEnd:function(a){if(Object.prototype.hasOwnProperty.call(this._eventStartTimes,a)===!1){!1;return}var b=Object.prototype.hasOwnProperty.call(this._eventStartTimes,a)?Date.now()-this._eventStartTimes[a]:-1;this._getPerfLogger().setEventType(a).setEventTotalTime(b).log();delete this._eventStartTimes[a]},_getLogger:function(){return new(b("DirectMessagingTypedLogger"))()},_getPerfLogger:function(){return new(b("FBStoriesWWWPerfTypedLogger"))()},openMediaLog:function(){var a=b("FBStoriesStore").getFeedTrackingData(b("FBStoriesLoggingConstants").ACTION_OPEN_MEDIA);b("Banzai").post("stories_www_vpv_banzai",{media_id:b("FBStoriesStore").getCurrentThreadMediaIDForSelectedBucket(),owner_id:b("FBStoriesStore").getSelectedBucketOwnerID()});b("Banzai").post("fb_stories_banzai_generic",{ft:a});g.mediaLog(b("FBStoriesLoggingConstants").ACTION_OPEN_MEDIA)},deleteMediaLog:function(){g.mediaLog(b("FBStoriesLoggingConstants").ACTION_DELETE_MEDIA)},openSeenSummaryLog:function(){g.mediaLog(b("FBStoriesLoggingConstants").ACTION_OPEN_SEEN_SUMMARY)},storyNavigationLog:function(a){a=g.getMediaLogger(b("FBStoriesLoggingConstants").ACTION_STORY_NAVIGATION).setGesture(a);a.log();g.storyInsightsLog(a)},closeStoryLog:function(a,c){var d=b("FBStoriesLoggingConstants").ACTION_CLOSE_STORY;a=g.getMediaLogger(b("FBStoriesLoggingConstants").ACTION_CLOSE_STORY).setGesture(a).setActionSource(c);a.log();g.storyInsightsLog(a);a=b("FBStoriesStore").getSelectedBucketOwnerID();var e=b("FBStoriesStore").getThreadCountForSelectedBucket();b("Banzai").post("stories_interaction_poseidon_logging_banzai",{name:d,source:c,story_owner:String(a),number_media:String(e)});this._viewerSessionID=null}};e.exports=g}),null);
__d("FBStoriesPrefetcher",["Bootloader","FBStoriesActionsHelper","FBStoriesStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={prefetchForCurrentThreadAndBucket:function(){this.prefetch(b("FBStoriesStore").getSelectedBucketIndex(),b("FBStoriesStore").getCurrentThreadIndexForSelectedBucket())},prefetch:function(a,b){this._prefetchVideos(a,b)},_prefetchVideos:function(a,b){this._prefetchThreadVideo(a,b),this._prefetchForwardVideo(a,b),this._prefetchBackwardsVideo(a,b)},_prefetchForwardVideo:function(a,b){this._prefetchVideo(!0,a,b)},_prefetchBackwardsVideo:function(a,b){this._prefetchVideo(!1,a,b)},_prefetchVideo:function(a,c,d){__p&&__p();var e=b("FBStoriesStore").getThreadCount(c);d=a?d+1:d-1;while(d>=0&&d<e){if(this._prefetchThreadVideo(c,d))return!0;d=a?d+1:d-1}d=c;while(!b("FBStoriesActionsHelper").checkAllBucketsViewed(d)){e=b("FBStoriesActionsHelper").getNextBucketAndThreadIndex(d,a);c=e.nextBucketIndex;e=e.nextThreadIndex;if(this._prefetchThreadVideo(c,e))return!0;d=c}return!1},_prefetchThreadVideo:function(a,c){var d=b("FBStoriesStore").getVideoMediaIdForBucketIndexAndThreadIndex(a,c);if(!d)return!1;b("Bootloader").loadModules(["VideoPlayerMetaData"],function(a){a.genVideoData(d,{allowDashPrefetch:!0,forceHD:!0})},"FBStoriesPrefetcher");return!0}};e.exports=a}),null);
__d("FBStoriesTrayShimmerLoader.react",["cx","React","range"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){return a.layout==="list"?b("React").createElement(i,a):b("React").createElement(h,a)}function h(a){a=a.numItems;a=a?a:6;var c=function(a){return b("React").createElement("div",{className:"_413r",key:a},b("React").createElement("div",{className:"_4141 horizontal"},b("React").createElement("div",{className:"_4142"})),b("React").createElement("div",{className:"_4143"}),b("React").createElement("div",{className:"_4x8g"}),b("React").createElement("div",{className:"_4x8h"}),b("React").createElement("div",{className:"_4146"}))};return b("React").createElement("div",{className:"_4147"},b("React").createElement("div",{className:"_4148"},b("range")(0,a).map(c)))}function i(a){var c=a.numItems,d=a.listItemWidth;a=a.listRootHeight;c=c?c:6;var e=function(a){return b("React").createElement("div",{className:"_3r2u",key:a,style:d&&{minWidth:d,maxWidth:d}},b("React").createElement("div",{className:"_4141"},b("React").createElement("div",{className:"_4142"})),b("React").createElement("div",{className:"_3r2v"}),b("React").createElement("div",{className:"_3r31"}),b("React").createElement("div",{className:"_3r32"}),b("React").createElement("div",{className:"_3r33"}),b("React").createElement("div",{className:"_3r34"}),b("React").createElement("div",{className:"_3r35"}),b("React").createElement("div",{className:"_3r36"}))};return b("React").createElement("div",{className:"_3r37 _4147",style:a&&{height:a+"px"}},b("React").createElement("div",{className:"_3r38"},b("range")(0,c).map(e)))}e.exports=a}),null);
__d("FBStoriesPog.react",["ix","cx","fbt","CameraPostTypes","CameraPostTypesHelper","Image.react","React","XUISpinner.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.render=function(){var a=this.props,c=a.previewImageUri;a=a.profileImageUri;c=c?c:a;a=!!c;c=a?b("React").createElement(b("Image.react"),{src:c,className:"_26w6"}):null;var d=this.$1(),e="_26w4"+(this.props.highlighted?" _26w9":"")+(this.props.live?" _26wp":"")+(a?" _26wu":"")+(this.props.size==="small"?" size-small":"")+(this.props.size==="small-44"?" size-small-44":"")+(this.props.size==="small-48"?" size-small-48":"")+(this.props.borderOption==="hide-and-expand"?" no-border":"")+(this.props.borderOption==="hide"?" hide-border":""),f=b("React").createElement("div",{className:"_26wv"}),h=b("React").createElement("div",{className:"_2h3r"},b("React").createElement(b("Image.react"),{src:g("504435")})),j=b("React").createElement("div",{className:"_26wx"},b("React").createElement(b("Image.react"),{alt:i._("DIRETO"),src:g("404364")}));return b("React").createElement("div",{className:e},c,this.props.showBadge?f:null,d,b("React").createElement(b("XUISpinner.react"),{size:"large",background:a?"light":"dark",className:"_26ww"}),this.props.live?j:null,this.props.showBlueCross&&!this.props.live?h:null)};a.prototype.$1=function(){var a=b("CameraPostTypesHelper").isEventStory(this.props.cameraPostType),c=b("CameraPostTypesHelper").isGroupStory(this.props.cameraPostType);return!a&&!c?null:b("React").createElement("div",{className:"_26ws"},b("React").createElement("div",{className:(a?"_26wz":"")+(c?" _26w-":"")}))};function a(){j.apply(this,arguments)}a.defaultProps={highlighted:!1,showBadge:!1,live:!1,size:"normal",cameraPostType:b("CameraPostTypes").STORY,borderOption:"show"};e.exports=a}),null);
__d("FBStoriesTrayUploadingAnimation.react",["cssVar","cx","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=48,j=58,k=76,l=2,m=i/2,n=j/2,o=k/2,p=m-2,q=n-2,r=o-2;a=function(a){__p&&__p();var c,d,e;switch(a.size){case"small":c=i;d=m;e=p;break;case"medium":c=j;d=n;e=q;break;case"large":default:c=k;d=o;e=r;break}return b("React").createElement("svg",{className:"_65xu"+(a.size==="small"?" size-small":"")+(a.size==="medium"?" size-medium":""),height:c,width:c},b("React").createElement("g",{className:"_65xv"},b("React").createElement("circle",{className:"_4kq4",cx:d,cy:d,fill:"none",r:e,stroke:"#4080ff",strokeWidth:l})))};e.exports=a}),null);
__d("FBStoriesTrayFullItem.react",["cx","FBStoriesTrayUploadingAnimation.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=function(){!this.props.disabled&&!this.props.loading&&!this.props.uploading&&this.props.onSelect(this.props.bucketID)}.bind(this),b}a.prototype.render=function(){var a;if(!this.props.bucketID)return null;var c=this.props.uploading&&b("React").createElement(b("FBStoriesTrayUploadingAnimation.react"),{size:"medium"});return b("React").createElement("div",{tabIndex:0,role:"button",onClick:this.$1,onKeyPress:this.$1,className:"_1zp8"+(((a=this.props.isRHCRedesign)!=null?a:!1)?" isRHCRedesign":"")},c,this.props.children)};e.exports=a}),null);
__d("FBStoriesTrayItemTitle.react",["cx","fbt","React","Timestamp.react","formatDate"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=this.$1(),c=this.$2();return b("React").createElement("div",{className:"_mx9"+(this.props.ownBucket?" _mxa":"")+(this.props.verbose?" verbose":"")},a,c)};a.prototype.$1=function(){return this.props.ownBucket?b("React").createElement("div",{className:"_mxb"},b("React").createElement("span",{className:"_nbt"},h._("A Tua Hist\u00f3ria"))):this.props.actorName?b("React").createElement("div",{dir:"auto",className:"_mxb"},b("React").createElement("span",{className:"_nbt"},this.props.actorName)):null};a.prototype.$2=function(){return this.props.verbose&&this.props.lastUpdateTime?b("React").createElement("div",{className:"_mxc"},b("React").createElement(b("Timestamp.react"),{key:"timestamp",autoUpdate:!0,time:this.props.lastUpdateTime,text:b("formatDate")(this.props.lastUpdateTime,"M j, Y",{utc:!0})})):null};function a(){i.apply(this,arguments)}a.defaultProps={ownBucket:!1,verbose:!1,lastUpdateTime:undefined};e.exports=a}),null);
__d("FBStoriesViewerHelper",["FBStoriesActionsHelper","FBStoriesActionTypes","FBStoriesDispatcher","JSResource"],(function(a,b,c,d,e,f){"use strict";var g=b("FBStoriesDispatcher").dispatch;a={toggleViewer:function(a,c){g({type:b("FBStoriesActionTypes").SET_VIEWER_OPEN,value:a,entrypoint:c});b("FBStoriesActionsHelper").resetNavMap();return b("JSResource")("FBStoriesViewer").__setRef("FBStoriesViewerHelper").load().then(function(b){return b.getInstance().toggle(a)})}};e.exports=a}),null);